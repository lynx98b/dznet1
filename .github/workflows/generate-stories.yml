name: Generate Stories Metadata

on:
  push:
    paths:
      - '**.html'
      - '**.jpg'
      - '**.png'
  workflow_dispatch:

jobs:
  generate-metadata:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
          
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          
      - name: Generate metadata
        run: node generate-metadata.js
        
      - name: Show results
        run: |
          echo "âœ… MÃ©tadonnÃ©es gÃ©nÃ©rÃ©es avec succÃ¨s !"
          echo "ğŸ“Š Total d'histoires: $(jq '.totalStories' stories-metadata.json)"
          echo "ğŸ“„ Fichier stories-metadata.json crÃ©Ã©"
