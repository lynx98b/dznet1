<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="G√©n√©rateur de prompt pour contenu HTML enfant - Version professionnelle optimis√©e">
    <title>G√©n√©rateur Prompt Contenu Enfant - v1.006</title>
    <style>
        /* ===== VARIABLES & RESET ===== */
        :root {
            --primary: #4A90E2;
            --success: #27AE60;
            --warning: #F39C12;
            --danger: #E74C3C;
            --info: #3498DB;
            --bg-light: #F8F9FA;
            --text-dark: #2C3E50;
            --border: #DFE6E9;
            --shadow: rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-dark);
        }
        
        /* ===== CONTENEUR PRINCIPAL ===== */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        /* ===== HEADER ===== */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, #357ABD 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        header h1 {
            font-size: 26px;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 14px;
            opacity: 0.95;
        }
        
        .version-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .help-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--warning);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .help-btn:hover {
            background: #E67E22;
            transform: scale(1.05);
        }
        
        /* ===== PROGRESS BAR ===== */
        .progress-container {
            background: var(--bg-light);
            padding: 20px 30px;
            border-bottom: 2px solid var(--border);
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #E0E0E0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success) 0%, var(--primary) 100%);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .progress-text {
            margin-top: 10px;
            font-size: 13px;
            color: #7F8C8D;
            text-align: center;
        }
        
        /* ===== MODAL G√âN√âRIQUE ===== */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            animation: fadeIn 0.3s;
            overflow-y: auto;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 16px;
            max-width: 700px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            animation: slideDown 0.4s;
        }
        
        .modal-content.large {
            max-width: 900px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--danger);
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .modal-close:hover {
            background: #C0392B;
            transform: rotate(90deg);
        }
        
        .modal-content h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        .modal-content h3 {
            color: var(--success);
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .stat-box {
            background: var(--bg-light);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--primary);
        }
        
        .stat-box strong {
            color: var(--primary);
            font-size: 18px;
        }
        
        .example-box {
            background: #E8F8F5;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid var(--success);
        }
        
        /* ===== MODAL R√âSULTAT ===== */
        .result-modal .modal-content {
            padding: 0;
            overflow: hidden;
        }
        
        .result-header {
            background: linear-gradient(135deg, var(--success) 0%, #229954 100%);
            color: white;
            padding: 25px 40px;
            text-align: center;
        }
        
        .result-header h2 {
            color: white;
            margin: 0 0 10px 0;
            font-size: 26px;
        }
        
        .result-body {
            padding: 30px 40px;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        #promptOutputModal {
            background: #2C3E50;
            color: #ECF0F1;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid var(--border);
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .result-actions {
            padding: 20px 40px 30px 40px;
            background: var(--bg-light);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* ===== FORMULAIRE ===== */
        .form-wrapper {
            padding: 40px;
        }
        
        .metadata-section {
            background: #FFF9E6;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 2px solid var(--warning);
        }
        
        .metadata-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        /* ===== SECTIONS COLLAPSIBLES ===== */
        .section {
            margin-bottom: 20px;
            border: 2px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
        }
        
        .section.collapsed .section-content {
            display: none;
        }
        
        .section-header {
            background: linear-gradient(135deg, var(--bg-light) 0%, #E8E8E8 100%);
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            user-select: none;
        }
        
        .section-header:hover {
            background: linear-gradient(135deg, #E8E8E8 0%, #D8D8D8 100%);
        }
        
        .section-title {
            font-size: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
        }
        
        .section-toggle {
            font-size: 24px;
            color: var(--primary);
            transition: transform 0.3s;
        }
        
        .section.collapsed .section-toggle {
            transform: rotate(-90deg);
        }
        
        .section-content {
            padding: 30px;
            background: white;
        }
        
        .required-badge {
            background: var(--danger);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .optional-badge {
            background: var(--info);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        label.required::after {
            content: " *";
            color: var(--danger);
        }
        
        /* ===== TOOLTIPS ===== */
        .tooltip {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            background: var(--info);
            color: white;
            border-radius: 50%;
            font-size: 12px;
            font-weight: bold;
            cursor: help;
            margin-left: 5px;
        }
        
        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #2C3E50;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            white-space: nowrap;
            max-width: 300px;
            white-space: normal;
            width: max-content;
            z-index: 100;
            font-size: 13px;
            font-weight: normal;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .tooltip:hover::before {
            content: '';
            position: absolute;
            bottom: 22px;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-top-color: #2C3E50;
            z-index: 101;
        }
        
        /* ===== VALIDATION ERREURS ===== */
        .error-message {
            display: none;
            color: var(--danger);
            font-size: 13px;
            font-weight: 600;
            margin-top: 5px;
            padding: 8px 12px;
            background: #FADBD8;
            border-radius: 4px;
            border-left: 3px solid var(--danger);
        }
        
        .form-group.has-error .error-message {
            display: block;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .form-group.has-error input,
        .form-group.has-error select,
        .form-group.has-error textarea {
            border-color: var(--danger);
            background: #FADBD8;
        }
        
        .form-group.has-error .checkbox-group,
        .form-group.has-error .radio-group {
            border: 3px solid var(--danger);
            border-radius: 8px;
            padding: 10px;
            background: #FADBD8;
        }
        
        input[type="text"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }
        
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        /* ===== CHECKBOXES & RADIOS ===== */
        .checkbox-group,
        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 12px;
        }
        
        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: var(--bg-light);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .checkbox-item:hover,
        .radio-item:hover {
            background: #E8F4F8;
            border-color: var(--primary);
        }
        
        .checkbox-item input:checked ~ span,
        .radio-item input:checked ~ span {
            font-weight: 600;
            color: var(--primary);
        }
        
        input[type="checkbox"],
        input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        /* ===== PALETTES COULEURS ===== */
        .color-palette {
            display: flex;
            gap: 10px;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .color-palette:hover {
            border-color: var(--primary);
            background: #E8F4F8;
        }
        
        .color-palette input[type="radio"] {
            margin-right: 10px;
        }
        
        .color-swatch {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            border: 2px solid #ddd;
        }
        
        .palette-name {
            font-weight: 600;
            flex: 1;
        }
        
        /* ===== BOUTONS ===== */
        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        button {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
            flex: 1;
            min-width: 200px;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: #357ABD;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
            flex: 1;
            min-width: 200px;
        }
        
        .btn-success:hover:not(:disabled) {
            background: #229954;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }
        
        .btn-secondary {
            background: var(--border);
            color: var(--text-dark);
        }
        
        .btn-secondary:hover {
            background: #BDC3C7;
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background: #E67E22;
        }
        
        /* ===== SPINNER CHARGEMENT ===== */
        .spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        button.loading .spinner {
            display: block;
        }
        
        button.loading span:not(.spinner) {
            display: none;
        }
        
        /* ===== HELPER TEXT ===== */
        .helper-text {
            font-size: 13px;
            color: #7F8C8D;
            margin-top: 5px;
            font-style: italic;
        }
        
        .info-banner {
            background: #E3F2FD;
            border-left: 4px solid var(--info);
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .feature-badge {
            display: inline-block;
            background: var(--success);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 8px;
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .form-wrapper {
                padding: 20px;
            }
            
            header h1 {
                font-size: 20px;
            }
            
            .help-btn,
            .version-badge {
                position: static;
                margin: 10px auto;
            }
            
            header {
                padding: 20px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn-primary,
            .btn-success {
                width: 100%;
            }
            
            .checkbox-group,
            .radio-group {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 25px;
                margin: 20px;
                max-height: 90vh;
            }
            
            .result-header,
            .result-body,
            .result-actions {
                padding: 20px;
            }
            
            .metadata-grid {
                grid-template-columns: 1fr;
            }
            
            .section-content {
                padding: 20px;
            }
        }
        
        /* ===== ACCESSIBILIT√â ===== */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus {
            outline: 3px solid var(--primary);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <header>
            <button class="help-btn" onclick="openHelpModal()">
                <span>‚ùì</span>
                <span>Guide</span>
            </button>
            <span class="version-badge">v1.006</span>
            <h1>üé® G√©n√©rateur de Prompt - Contenu HTML Enfant</h1>
            <p>Cr√©ez des exp√©riences √©ducatives interactives s√©curis√©es</p>
            <p style="font-size: 12px; margin-top: 10px;">‚úÖ Toujours trilingue FR/AR/EN | üîí RGPD/COPPA | ‚ôø Accessible</p>
        </header>
        
        <!-- PROGRESS BAR -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">
                Remplissez au minimum les 3 champs obligatoires pour g√©n√©rer un prompt
            </div>
        </div>
        
        <!-- MODAL AIDE -->
        <div id="helpModal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="closeHelpModal()">√ó</button>
                <h2>üìò Guide Rapide</h2>
                
                <p><strong>üéØ Objectif :</strong> Cr√©er un prompt pour g√©n√©rer du contenu √©ducatif HTML interactif adapt√© aux enfants.</p>
                
                <h3>‚úÖ SEULEMENT 3 CHAMPS OBLIGATOIRES :</h3>
                <div class="stat-box">
                    <strong>1.</strong> Votre nom/pr√©nom<br>
                    <strong>2.</strong> Au moins 1 tranche d'√¢ge<br>
                    <strong>3.</strong> Le th√®me/sujet du contenu
                </div>
                
                <div class="info-banner">
                    <strong>üí° Nouveau :</strong> Tous les autres champs sont <strong>optionnels</strong> avec valeurs par d√©faut intelligentes. Le contenu sera <strong>TOUJOURS trilingue</strong> (Fran√ßais/Arabe/Anglais) automatiquement.
                </div>
                
                <h3>üöÄ Comment √ßa marche ?</h3>
                <ol style="line-height: 2; margin-left: 20px;">
                    <li>Remplissez les 3 champs obligatoires minimum</li>
                    <li>Ajoutez des options si besoin (sinon valeurs par d√©faut)</li>
                    <li>Cliquez "G√©n√©rer le Prompt"</li>
                    <li>Copiez le prompt JSON g√©n√©r√©</li>
                    <li>Collez-le dans ChatGPT/Claude/Gemini</li>
                    <li>L'IA g√©n√®re le fichier HTML directement</li>
                    <li>T√©l√©chargez et ouvrez dans un navigateur</li>
                </ol>
                
                <h3>üîí Garanties</h3>
                <ul style="line-height: 2; margin-left: 20px;">
                    <li>‚úÖ Toujours responsive (mobile/tablette/PC)</li>
                    <li>‚úÖ Toujours trilingue FR/AR/EN</li>
                    <li>‚úÖ Aucune donn√©e collect√©e</li>
                    <li>‚úÖ Fonctionne offline</li>
                    <li>‚úÖ Pas de publicit√©</li>
                </ul>
                
                <button class="btn-primary" onclick="closeHelpModal()" style="margin-top: 25px; width: 100%;">
                    <span>‚úÖ Compris, je commence !</span>
                </button>
            </div>
        </div>
        
        <!-- MODAL R√âSULTAT -->
        <div id="resultModal" class="modal result-modal">
            <div class="modal-content large">
                <button class="modal-close" onclick="closeResultModal()">√ó</button>
                <div class="result-header">
                    <h2>üéâ Prompt G√©n√©r√© avec Succ√®s !</h2>
                    <p style="font-size: 14px; margin: 0;">Copiez ce prompt et collez-le dans votre IA (ChatGPT, Claude, Gemini...)</p>
                </div>
                <div class="result-body">
                    <div id="promptOutputModal"></div>
                </div>
                <div class="result-actions">
                    <button id="copyBtnModal" class="btn-success">
                        <span class="spinner"></span>
                        <span>üìã Copier le Prompt</span>
                    </button>
                    <button id="downloadBtnModal" class="btn-primary">
                        <span>üíæ T√©l√©charger (.txt)</span>
                    </button>
                    <button onclick="closeResultModal()" class="btn-secondary">
                        <span>‚úñÔ∏è Fermer</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- FORMULAIRE -->
        <div class="form-wrapper">
            <form id="promptForm">
                
                <!-- M√âTADONN√âES PROJET -->
                <div class="metadata-section">
                    <h3 style="color: var(--warning); margin-bottom: 15px;">üìù Informations du Projet</h3>
                    <div class="metadata-grid">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="creatorName" class="required">Votre nom / Pr√©nom</label>
                            <input type="text" id="creatorName" placeholder="Ex: Marie Dupont" required>
                            <div class="error-message">‚ùå Champ obligatoire</div>
                            <span class="helper-text">üíæ Sauvegard√© automatiquement</span>
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="projectVersion">Version</label>
                            <input type="text" id="projectVersion" value="v1.0" placeholder="v1.0">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label>Date</label>
                            <input type="text" id="creationDate" readonly style="background: #f0f0f0;">
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 1: √ÇGE (OBLIGATOIRE) -->
                <div class="section">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-title">
                            üéØ Public Cible
                            <span class="required-badge">OBLIGATOIRE</span>
                            <span class="tooltip" data-tooltip="S√©lectionnez au moins 1 tranche d'√¢ge">?</span>
                        </div>
                        <div class="section-toggle">‚ñº</div>
                    </div>
                    <div class="section-content">
                        <div class="form-group" id="ageGroup">
                            <label class="required">Tranches d'√¢ge (minimum 1)</label>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" name="ageRange" value="3-4 ans (Petite section)">
                                    <span>3-4 ans (Petite section)</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="ageRange" value="5-6 ans (Grande section/CP)">
                                    <span>5-6 ans (Grande section/CP)</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="ageRange" value="7-8 ans (CE1/CE2)">
                                    <span>7-8 ans (CE1/CE2)</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="ageRange" value="9-10 ans (CM1/CM2)">
                                    <span>9-10 ans (CM1/CM2)</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="ageRange" value="11-12 ans (Coll√®ge)">
                                    <span>11-12 ans (Coll√®ge)</span>
                                </label>
                            </div>
                            <div class="error-message">‚ùå S√©lectionnez au moins 1 tranche d'√¢ge</div>
                        </div>
                        
                        <div class="form-group">
                            <label>Niveau de lecture
                                <span class="tooltip" data-tooltip="Si non renseign√©, sera adapt√© automatiquement selon l'√¢ge">?</span>
                            </label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="readingLevel" value="Pr√©-lecteur (images/audio/pictogrammes)">
                                    <span>üì∏ Pr√©-lecteur</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="readingLevel" value="Lecteur d√©butant (phrases courtes max 8 mots)">
                                    <span>üìñ D√©butant</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="readingLevel" value="Lecteur autonome (textes structur√©s)">
                                    <span>üìö Autonome</span>
                                </label>
                            </div>
                            <span class="helper-text">ü§ñ Par d√©faut : adapt√© automatiquement √† l'√¢ge</span>
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 2: TH√àME (OBLIGATOIRE) -->
                <div class="section">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-title">
                            üé® Th√®me et Contenu
                            <span class="required-badge">OBLIGATOIRE</span>
                            <span class="tooltip" data-tooltip="D√©crivez simplement ce que vous voulez enseigner">?</span>
                        </div>
                        <div class="section-toggle">‚ñº</div>
                    </div>
                    <div class="section-content">
                        <div class="form-group" id="themeGroup">
                            <label for="theme" class="required">Sujet principal</label>
                            <input type="text" id="theme" placeholder="Ex: Apprentissage des couleurs primaires" required>
                            <div class="error-message">‚ùå Champ obligatoire</div>
                            <span class="helper-text">Une phrase simple suffit</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Objectifs p√©dagogiques (optionnel)</label>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" name="pedGoals" value="Reconnaissance couleurs">
                                    <span>üé® Couleurs</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="pedGoals" value="Formes g√©om√©triques">
                                    <span>üî∑ Formes</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="pedGoals" value="Chiffres et comptage">
                                    <span>üî¢ Chiffres</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="pedGoals" value="Alphabet et lettres">
                                    <span>üî§ Alphabet</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="pedGoals" value="Animaux">
                                    <span>üê∂ Animaux</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="pedGoals" value="√âmotions">
                                    <span>üòä √âmotions</span>
                                </label>
                            </div>
                            <span class="helper-text">ü§ñ Par d√©faut : adapt√© au th√®me saisi</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="customGoals">Autres objectifs (optionnel)</label>
                            <textarea id="customGoals" placeholder="Ex: Reconna√Ætre les instruments de musique"></textarea>
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 3: OPTIONS LAYOUT (NOUVEAU) -->
                <div class="section collapsed">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-title">
                            üìê Structure de la Page
                            <span class="optional-badge">OPTIONNEL</span>
                            <span class="feature-badge">NOUVEAU</span>
                        </div>
                        <div class="section-toggle">‚ñº</div>
                    </div>
                    <div class="section-content">
                        <div class="form-group">
                            <label>Type de navigation
                                <span class="tooltip" data-tooltip="Single page = tout sur 1 page avec scroll. Multi-pages = plusieurs √©crans avec boutons suivant/pr√©c√©dent">?</span>
                            </label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="pageType" value="single" checked>
                                    <span>üìÑ Single Page (scroll)</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="pageType" value="multi">
                                    <span>üìö Multi-Pages (navigation)</span>
                                </label>
                            </div>
                            <span class="helper-text">ü§ñ Par d√©faut : Single Page</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Position aide/infos suppl√©mentaires
                                <span class="tooltip" data-tooltip="Afficher une colonne lat√©rale avec conseils, statistiques, aide pour parents">?</span>
                            </label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="helpPosition" value="none" checked>
                                    <span>üö´ Aucune colonne</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="helpPosition" value="left">
                                    <span>üëà Colonne gauche</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="helpPosition" value="right">
                                    <span>üëâ Colonne droite</span>
                                </label>
                            </div>
                            <span class="helper-text">ü§ñ Par d√©faut : Aucune colonne (contenu pleine largeur)</span>
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 4: INTERACTIVIT√â (OPTIONNEL) -->
                <div class="section collapsed">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-title">
                            üéÆ Interactivit√©
                            <span class="optional-badge">OPTIONNEL</span>
                        </div>
                        <div class="section-toggle">‚ñº</div>
                    </div>
                    <div class="section-content">
                        <div class="form-group">
                            <label>Types d'interactions</label>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" name="interactions" value="Quiz/QCM">
                                    <span>üìù Quiz/QCM</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="interactions" value="Glisser-d√©poser">
                                    <span>üñ±Ô∏è Glisser-d√©poser</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="interactions" value="Colorier/Dessiner">
                                    <span>üé® Colorier</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="interactions" value="Jeux de m√©moire">
                                    <span>üß† M√©moire</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="interactions" value="Animations au clic">
                                    <span>‚ú® Animations</span>
                                </label>
                            </div>
                            <span class="helper-text">ü§ñ Par d√©faut : adapt√© au th√®me et √† l'√¢ge</span>
                        </div>
                        
                        <div class="form-group">
                            <label>Syst√®me de r√©compenses</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="rewards" value="Sons + animations" checked>
                                    <span>üéµ Sons + animations</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="rewards" value="√âtoiles/badges">
                                    <span>‚≠ê √âtoiles/badges</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="rewards" value="Messages encourageants">
                                    <span>üí¨ Messages</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 5: DESIGN (OPTIONNEL) -->
                <div class="section collapsed">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-title">
                            üé® Design et Couleurs
                            <span class="optional-badge">OPTIONNEL</span>
                        </div>
                        <div class="section-toggle">‚ñº</div>
                    </div>
                    <div class="section-content">
                        <div class="form-group">
                            <label>Palette de couleurs</label>
                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                <label class="color-palette">
                                    <input type="radio" name="colorPalette" value="Pastel Doux" checked>
                                    <div style="display: flex; gap: 5px;">
                                        <div class="color-swatch" style="background: #FFE4E1;"></div>
                                        <div class="color-swatch" style="background: #E0F2F7;"></div>
                                        <div class="color-swatch" style="background: #FFF9C4;"></div>
                                        <div class="color-swatch" style="background: #D1F2EB;"></div>
                                    </div>
                                    <span class="palette-name">üå∏ Pastel Doux</span>
                                </label>
                                
                                <label class="color-palette">
                                    <input type="radio" name="colorPalette" value="Oc√©an Calme">
                                    <div style="display: flex; gap: 5px;">
                                        <div class="color-swatch" style="background: #B3E5FC;"></div>
                                        <div class="color-swatch" style="background: #81D4FA;"></div>
                                        <div class="color-swatch" style="background: #4FC3F7;"></div>
                                        <div class="color-swatch" style="background: #29B6F6;"></div>
                                    </div>
                                    <span class="palette-name">üåä Oc√©an Calme</span>
                                </label>
                                
                                <label class="color-palette">
                                    <input type="radio" name="colorPalette" value="For√™t Enchant√©e">
                                    <div style="display: flex; gap: 5px;">
                                        <div class="color-swatch" style="background: #C8E6C9;"></div>
                                        <div class="color-swatch" style="background: #A5D6A7;"></div>
                                        <div class="color-swatch" style="background: #81C784;"></div>
                                        <div class="color-swatch" style="background: #66BB6A;"></div>
                                    </div>
                                    <span class="palette-name">üå≤ For√™t Enchant√©e</span>
                                </label>
                            </div>
                            <span class="helper-text">ü§ñ Par d√©faut : Pastel Doux</span>
                        </div>
                    </div>
                </div>
                
                <!-- SECTION 6: ACCESSIBILIT√â (OPTIONNEL) -->
                <div class="section collapsed">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-title">
                            ‚ôø Accessibilit√© Renforc√©e
                            <span class="optional-badge">OPTIONNEL</span>
                        </div>
                        <div class="section-toggle">‚ñº</div>
                    </div>
                    <div class="section-content">
                        <div class="info-banner">
                            <strong>‚ÑπÔ∏è</strong> Le contenu sera TOUJOURS responsive et conforme WCAG 2.1 AA. Ces options sont pour besoins sp√©cifiques.
                        </div>
                        
                        <div class="form-group">
                            <label>Options d'accessibilit√©</label>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" name="accessibility" value="Gros boutons 60x60px">
                                    <span>‚ôø Gros boutons</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="accessibility" value="Navigation clavier compl√®te">
                                    <span>‚å®Ô∏è Navigation clavier</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="accessibility" value="Support lecteurs d'√©cran">
                                    <span>üîä Lecteurs d'√©cran</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="accessibility" value="Contrastes AAA (7:1)">
                                    <span>üëÅÔ∏è Contrastes AAA</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="accessibility" value="Police dyslexie">
                                    <span>üìñ Police dyslexie</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="accessibility" value="Mode sombre/clair">
                                    <span>üåì Mode sombre/clair</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- BOUTONS -->
                <div class="button-group">
                    <button type="button" id="previewBtn" class="btn-warning">
                        <span>üëÅÔ∏è Pr√©visualiser le Prompt</span>
                    </button>
                    <button type="submit" id="submitBtn" class="btn-primary">
                        <span class="spinner"></span>
                        <span>üöÄ G√©n√©rer le Prompt Final</span>
                    </button>
                    <button type="reset" class="btn-secondary">
                        <span>üîÑ R√©initialiser</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // ===== VERSION & CONFIG =====
        const VERSION = "v1.006";
        const STORAGE_KEY_NAME = 'prompt_generator_creator_name';
        
        // ===== INITIALISATION =====
        window.addEventListener('DOMContentLoaded', function() {
            // Date automatique
            document.getElementById('creationDate').value = new Date().toLocaleDateString('fr-FR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Charger nom sauvegard√©
            const savedName = localStorage.getItem(STORAGE_KEY_NAME);
            if (savedName) {
                document.getElementById('creatorName').value = savedName;
            }
            
            // Mettre √† jour la progress bar
            updateProgress();
            
            // √âcouteurs pour progress bar
            document.querySelectorAll('input, select, textarea').forEach(element => {
                element.addEventListener('change', updateProgress);
                element.addEventListener('input', updateProgress);
            });
        });
        
        // ===== PROGRESS BAR =====
        function updateProgress() {
            const creatorName = document.getElementById('creatorName').value.trim();
            const ageChecked = document.querySelectorAll('input[name="ageRange"]:checked').length;
            const theme = document.getElementById('theme').value.trim();
            
            let completed = 0;
            if (creatorName) completed++;
            if (ageChecked > 0) completed++;
            if (theme) completed++;
            
            const percentage = (completed / 3) * 100;
            document.getElementById('progressFill').style.width = percentage + '%';
            
            if (percentage === 100) {
                document.getElementById('progressText').textContent = '‚úÖ Pr√™t √† g√©n√©rer ! Tous les champs obligatoires sont remplis';
                document.getElementById('progressText').style.color = 'var(--success)';
                document.getElementById('progressText').style.fontWeight = '600';
            } else {
                document.getElementById('progressText').textContent = completed + '/3 champs obligatoires remplis';
                document.getElementById('progressText').style.color = '#7F8C8D';
                document.getElementById('progressText').style.fontWeight = 'normal';
            }
        }
        
        // ===== SECTIONS COLLAPSIBLES =====
        function toggleSection(header) {
            const section = header.parentElement;
            section.classList.toggle('collapsed');
        }
        
        // ===== SAUVEGARDE NOM =====
        document.getElementById('creatorName').addEventListener('blur', function() {
            const name = this.value.trim();
            if (name) {
                localStorage.setItem(STORAGE_KEY_NAME, name);
            }
        });
        
        // ===== MODAL HELP =====
        function openHelpModal() {
            document.getElementById('helpModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeHelpModal() {
            document.getElementById('helpModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }
        
        document.getElementById('helpModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeHelpModal();
            }
        });
        
        // ===== MODAL R√âSULTAT =====
        function openResultModal() {
            document.getElementById('resultModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeResultModal() {
            document.getElementById('resultModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }
        
        document.getElementById('resultModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeResultModal();
            }
        });
        
        // ===== VALIDATION FORMULAIRE =====
        function clearErrors() {
            document.querySelectorAll('.form-group.has-error').forEach(group => {
                group.classList.remove('has-error');
            });
        }
        
        function showError(groupId, message) {
            const group = document.getElementById(groupId);
            if (group) {
                group.classList.add('has-error');
                const errorMsg = group.querySelector('.error-message');
                if (errorMsg && message) {
                    errorMsg.textContent = '‚ùå ' + message;
                }
                // Ouvrir la section si ferm√©e
                const section = group.closest('.section');
                if (section && section.classList.contains('collapsed')) {
                    section.classList.remove('collapsed');
                }
            }
        }
        
        function validateForm() {
            clearErrors();
            let isValid = true;
            let firstErrorElement = null;
            
            // Validation nom
            const creatorName = document.getElementById('creatorName').value.trim();
            if (!creatorName) {
                const group = document.querySelector('#creatorName').closest('.form-group');
                group.classList.add('has-error');
                isValid = false;
                if (!firstErrorElement) firstErrorElement = group;
            }
            
            // Validation √¢ge
            const ageChecked = document.querySelectorAll('input[name="ageRange"]:checked');
            if (ageChecked.length === 0) {
                showError('ageGroup', 'S√©lectionnez au moins 1 tranche d\'√¢ge');
                isValid = false;
                if (!firstErrorElement) firstErrorElement = document.getElementById('ageGroup');
            }
            
            // Validation th√®me
            const theme = document.getElementById('theme').value.trim();
            if (!theme) {
                showError('themeGroup', 'D√©crivez le sujet du contenu');
                isValid = false;
                if (!firstErrorElement) firstErrorElement = document.getElementById('themeGroup');
            }
            
            // Scroll vers premi√®re erreur
            if (!isValid && firstErrorElement) {
                firstErrorElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            
            return isValid;
        }
        
        // ===== PR√âVISUALISATION =====
        document.getElementById('previewBtn').addEventListener('click', function() {
            if (!validateForm()) {
                alert('‚ùå Veuillez remplir les 3 champs obligatoires d\'abord');
                return;
            }
            
            const promptData = buildPromptData();
            const preview = JSON.stringify(promptData, null, 2);
            
            alert('üìã APER√áU DU PROMPT JSON\n\n' + preview.substring(0, 500) + '\n\n... (tronqu√© pour aper√ßu)\n\nCliquez "G√©n√©rer le Prompt Final" pour obtenir le prompt complet.');
        });
        
        // ===== GESTION FORMULAIRE =====
        document.getElementById('promptForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }
            
            // Animation bouton
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.classList.add('loading');
            submitBtn.disabled = true;
            
            // Simuler g√©n√©ration
            setTimeout(function() {
                generatePrompt();
                submitBtn.classList.remove('loading');
                submitBtn.disabled = false;
            }, 800);
        });
        
        // ===== CONSTRUCTION DES DONN√âES =====
        function buildPromptData() {
            // M√©tadonn√©es
            const creatorName = document.getElementById('creatorName').value.trim();
            const projectVersion = document.getElementById('projectVersion').value;
            const creationDate = document.getElementById('creationDate').value;
            
            // Sauvegarder nom
            localStorage.setItem(STORAGE_KEY_NAME, creatorName);
            
            // √Çges
            const ageRanges = Array.from(document.querySelectorAll('input[name="ageRange"]:checked'))
                .map(function(cb) { return cb.value; });
            
            const readingLevelEl = document.querySelector('input[name="readingLevel"]:checked');
            const readingLevel = readingLevelEl ? readingLevelEl.value : "Adapt√© automatiquement selon l'√¢ge";
            
            // Th√®me
            const theme = document.getElementById('theme').value.trim();
            
            // Objectifs p√©dagogiques
            const pedGoals = Array.from(document.querySelectorAll('input[name="pedGoals"]:checked'))
                .map(function(cb) { return cb.value; });
            const customGoals = document.getElementById('customGoals').value.trim();
            let allGoals = pedGoals.slice();
            if (customGoals) {
                const customFormatted = customGoals.split('\n').map(function(line) { return line.trim(); }).filter(function(line) { return line; });
                allGoals = allGoals.concat(customFormatted);
            }
            if (allGoals.length === 0) {
                allGoals = ["Adapt√© automatiquement selon le th√®me et l'√¢ge"];
            }
            
            // Layout
            const pageType = document.querySelector('input[name="pageType"]:checked').value;
            const helpPosition = document.querySelector('input[name="helpPosition"]:checked').value;
            
            // Interactions
            const interactions = Array.from(document.querySelectorAll('input[name="interactions"]:checked'))
                .map(function(cb) { return cb.value; });
            if (interactions.length === 0) {
                interactions.push("Adapt√© automatiquement selon le th√®me et l'√¢ge");
            }
            
            const rewards = document.querySelector('input[name="rewards"]:checked').value;
            
            // Design
            const colorPalette = document.querySelector('input[name="colorPalette"]:checked').value;
            
            // Accessibilit√©
            const accessibility = Array.from(document.querySelectorAll('input[name="accessibility"]:checked'))
                .map(function(cb) { return cb.value; });
            
            return {
                metadata: {
                    creator: creatorName,
                    projectVersion: projectVersion,
                    creationDate: creationDate,
                    generator: "Formulaire " + VERSION,
                    formVersion: VERSION
                },
                targetAudience: {
                    ageRanges: ageRanges,
                    readingLevel: readingLevel
                },
                language: {
                    languages: ["Fran√ßais", "ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabe)", "English"],
                    layout: "S√©lecteur avec 3 drapeaux cliquables (üá´üá∑ üá©üáø üá¨üáß)",
                    note: "TOUJOURS trilingue - Non n√©gociable"
                },
                content: {
                    theme: theme,
                    educationalGoals: allGoals
                },
                layout: {
                    pageType: pageType,
                    helpPosition: helpPosition
                },
                interactivity: {
                    interactionTypes: interactions,
                    rewardSystem: rewards
                },
                design: {
                    colorPalette: colorPalette
                },
                accessibility: {
                    baseLevel: "WCAG 2.1 AA (TOUJOURS respect√©)",
                    additionalFeatures: accessibility.length > 0 ? accessibility : ["Aucune option sp√©ciale demand√©e"]
                },
                technicalRequirements: {
                    format: "HTML5 standalone - FICHIER UNIQUE",
                    fileSize: "< 200 KB",
                    responsive: true,
                    offline: true,
                    compatibility: ["Chrome 90+", "Firefox 88+", "Safari 14+", "Edge 90+"],
                    noExternalDependencies: "CRITIQUE - Aucun CDN, aucune ressource externe"
                },
                security: {
                    noExternalLinks: true,
                    noTracking: true,
                    noPersonalData: true,
                    noAds: true,
                    gdprCompliant: true,
                    coppaCompliant: true
                }
            };
        }
        
        // ===== G√âN√âRATION PROMPT =====
        function generatePrompt() {
            const promptData = buildPromptData();
            
            const prompt = "# üéØ PROMPT CR√âATION CONTENU HTML INTERACTIF ENFANT - v" + VERSION + "\n\n" +
"## üö® INSTRUCTIONS CRITIQUES POUR L'IA\n\n" +
"**‚ö†Ô∏è R√àGLE ABSOLUE #1 : LE FICHIER HTML DOIT D√âMARRER AU 1ER ESSAI**\n\n" +
"Tu dois g√©n√©rer un fichier HTML qui fonctionne **PARFAITEMENT d√®s le premier lancement**, SANS AUCUNE ERREUR, m√™me en cas de :\n" +
"- ‚ùå Images manquantes ‚Üí Utilise des emojis Unicode ou formes CSS\n" +
"- ‚ùå Sons manquants ‚Üí D√©sactive les sons ou simule visuellement\n" +
"- ‚ùå Polices manquantes ‚Üí Utilise uniquement Arial, sans-serif, system-ui\n" +
"- ‚ùå Ic√¥nes manquantes ‚Üí Utilise des emojis Unicode (‚úÖ ‚ùå üéµ üé® ‚≠ê)\n\n" +
"**AUCUNE d√©pendance externe autoris√©e :**\n" +
"- üö´ Pas de CDN (Bootstrap, jQuery, Font Awesome, Google Fonts)\n" +
"- üö´ Pas de <link> externe\n" +
"- üö´ Pas de <script src=\"...\"> externe\n" +
"- üö´ Pas de @import CSS externe\n" +
"- üö´ Pas de fetch/AJAX vers API externe\n\n" +
"**‚úÖ SEULEMENT AUTORIS√â :**\n" +
"- ‚úÖ Code HTML/CSS/JS inline dans un fichier unique\n" +
"- ‚úÖ Emojis Unicode natifs\n" +
"- ‚úÖ Formes CSS pures (border-radius, gradients, transforms)\n" +
"- ‚úÖ Couleurs hexad√©cimales / RGB\n" +
"- ‚úÖ Polices syst√®me (Arial, Helvetica, sans-serif)\n" +
"- ‚úÖ localStorage / sessionStorage pour sauvegardes locales\n\n" +
"---\n\n" +
"## üìã WORKFLOW OBLIGATOIRE\n\n" +
"**√âTAPE 1 : ANALYSE**\n" +
"‚Üí Lis attentivement la sp√©cification JSON ci-dessous\n\n" +
"**√âTAPE 2 : PLAN D√âTAILL√â**\n" +
"‚Üí Propose-moi un **PLAN EN FRAN√áAIS** contenant :\n" +
"   - Structure HTML (balises principales, sections)\n" +
"   - M√©caniques d'interactions (√©v√©nements, logique)\n" +
"   - Approche CSS responsive (mobile-first, breakpoints)\n" +
"   - Architecture JavaScript (fonctions, gestion √©tat)\n" +
"   - Impl√©mentation trilingue FR/AR/EN (s√©lecteur drapeaux)\n" +
"   - Strat√©gie pour g√©rer ressources manquantes (emojis, CSS shapes)\n" +
"   - Points de vigilance s√©curit√©/accessibilit√©\n" +
"   - Estimation poids final (<200 KB)\n\n" +
"**√âTAPE 3 : ATTENDRE VALIDATION**\n" +
"‚Üí **NE G√âN√àRE PAS LE HTML AVANT MON \"OK\" ou \"VALIDE\" EXPLICITE**\n\n" +
"**√âTAPE 4 : G√âN√âRATION FINALE**\n" +
"‚Üí Apr√®s mon approbation, g√©n√®re le fichier HTML complet standalone\n" +
"‚Üí Teste mentalement tous les cas d'erreur avant de me le fournir\n\n" +
"---\n\n" +
"## üéØ SP√âCIFICATIONS DU PROJET (JSON)\n\n" +
"```json\n" +
JSON.stringify(promptData, null, 2) + "\n" +
"```\n\n" +
"---\n\n" +
"## ‚úÖ CHECKLIST VALIDATION FINALE (√Ä FOURNIR AVEC LE HTML)\n\n" +
"Avant de me donner le fichier HTML, v√©rifie et confirme :\n\n" +
"**FONCTIONNEL :**\n" +
"- [ ] Le fichier s'ouvre sans erreur dans Chrome/Firefox/Safari\n" +
"- [ ] Aucune erreur console JavaScript\n" +
"- [ ] Aucune ressource 404 (images, fonts, scripts)\n" +
"- [ ] Les 3 langues (FR/AR/EN) fonctionnent avec drapeaux üá´üá∑ üá©üáø üá¨üáß\n" +
"- [ ] Navigation " + (promptData.layout.pageType === 'single' ? 'scroll fluide' : 'multi-pages avec boutons') + " op√©rationnelle\n" +
"- [ ] Toutes interactions test√©es (clics, hover, animations)\n" +
"- [ ] R√©compenses visuelles fonctionnent (" + promptData.interactivity.rewardSystem + ")\n\n" +
"**RESPONSIVE :**\n" +
"- [ ] Test√© sur 320px (mobile), 768px (tablette), 1920px (desktop)\n" +
"- [ ] Pas de d√©bordement horizontal\n" +
"- [ ] Texte lisible sur tous √©crans\n" +
"- [ ] Boutons touchables (min 44x44px sur mobile)\n\n" +
"**ACCESSIBILIT√â :**\n" +
"- [ ] Contrastes couleurs ‚â• 4.5:1 (WCAG AA)\n" +
"- [ ] Navigation clavier fonctionnelle (Tab, Enter, Espace)\n" +
"- [ ] Attributs alt sur √©l√©ments visuels importants\n" +
"- [ ] Attributs aria-label sur boutons ic√¥nes\n\n" +
"**PERFORMANCE :**\n" +
"- [ ] Poids total < 200 KB\n" +
"- [ ] Pas de lag au chargement\n" +
"- [ ] Animations fluides (60 FPS)\n\n" +
"**S√âCURIT√â :**\n" +
"- [ ] Aucun lien externe cliquable\n" +
"- [ ] Pas de collecte de donn√©es personnelles\n" +
"- [ ] sessionStorage uniquement pour sauvegardes locales\n\n" +
"**CONTENU :**\n" +
"- [ ] Adapt√© √† l'√¢ge : " + promptData.targetAudience.ageRanges.join(', ') + "\n" +
"- [ ] Th√®me \"" + promptData.content.theme + "\" bien trait√©\n" +
"- [ ] Objectifs p√©dagogiques int√©gr√©s\n" +
"- [ ] Ton bienveillant, encouragements positifs\n\n" +
"**M√âTADONN√âES :**\n" +
"- [ ] Commentaire en-t√™te HTML avec version " + promptData.metadata.projectVersion + "\n" +
"- [ ] Cr√©ateur \"" + promptData.metadata.creator + "\" mentionn√©\n" +
"- [ ] Date " + promptData.metadata.creationDate + " pr√©sente\n\n" +
"---\n\n" +
"## üí° EXEMPLES DE GESTION RESSOURCES MANQUANTES\n\n" +
"**Images manquantes ‚Üí CSS Shapes + Emojis :**\n" +
"```html\n" +
"<!-- ‚ùå PAS √áA -->\n" +
"<img src=\"cat.png\" alt=\"Chat\">\n\n" +
"<!-- ‚úÖ √áA -->\n" +
"<div class=\"animal-icon\">üê±</div>\n" +
"<style>\n" +
".animal-icon {\n" +
"    font-size: 80px;\n" +
"    width: 100px;\n" +
"    height: 100px;\n" +
"    display: flex;\n" +
"    align-items: center;\n" +
"    justify-content: center;\n" +
"    background: linear-gradient(135deg, #FFE4E1, #FFC1CC);\n" +
"    border-radius: 50%;\n" +
"    box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n" +
"}\n" +
"</style>\n" +
"```\n\n" +
"**Sons manquants ‚Üí Feedback visuel :**\n" +
"```javascript\n" +
"// ‚ùå PAS √áA\n" +
"function playSound() {\n" +
"    new Audio('correct.mp3').play(); // Erreur si fichier absent\n" +
"}\n\n" +
"// ‚úÖ √áA\n" +
"function showSuccessFeedback() {\n" +
"    const feedback = document.createElement('div');\n" +
"    feedback.textContent = 'üéâ Bravo ! ‚úÖ';\n" +
"    feedback.style.cssText = 'position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); font-size:48px; animation:popIn 0.5s;';\n" +
"    document.body.appendChild(feedback);\n" +
"    setTimeout(function() { feedback.remove(); }, 2000);\n" +
"}\n" +
"```\n\n" +
"**Ic√¥nes Font Awesome manquantes ‚Üí Emojis Unicode :**\n" +
"```html\n" +
"<!-- ‚ùå PAS √áA -->\n" +
"<i class=\"fa fa-star\"></i>\n\n" +
"<!-- ‚úÖ √áA -->\n" +
"<span>‚≠ê</span>\n" +
"```\n\n" +
"---\n\n" +
"## üåç IMPL√âMENTATION TRILINGUE OBLIGATOIRE\n\n" +
"Le HTML doit contenir 3 drapeaux cliquables **TOUJOURS** :\n" +
"- üá´üá∑ Fran√ßais\n" +
"- üá©üáø ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabe - drapeau Alg√©rie)\n" +
"- üá¨üáß English\n\n" +
"Utilise un s√©lecteur en haut √† droite avec emojis drapeaux cliquables.\n" +
"Au clic sur un drapeau ‚Üí Tout le contenu texte change dans la langue correspondante.\n\n" +
"Exemple structure :\n" +
"```html\n" +
"<div class=\"language-selector\">\n" +
"    <button onclick=\"setLanguage('fr')\" class=\"flag-btn\">üá´üá∑</button>\n" +
"    <button onclick=\"setLanguage('ar')\" class=\"flag-btn\">üá©üáø</button>\n" +
"    <button onclick=\"setLanguage('en')\" class=\"flag-btn\">üá¨üáß</button>\n" +
"</div>\n\n" +
"<h1 id=\"title\"></h1>\n\n" +
"<script>\n" +
"const translations = {\n" +
"    fr: { title: \"Bienvenue\" },\n" +
"    ar: { title: \"ŸÖÿ±ÿ≠ÿ®ÿß\" },\n" +
"    en: { title: \"Welcome\" }\n" +
"};\n\n" +
"function setLanguage(lang) {\n" +
"    document.getElementById('title').textContent = translations[lang].title;\n" +
"    // ... autres √©l√©ments\n" +
"}\n\n" +
"// Langue par d√©faut\n" +
"setLanguage('fr');\n" +
"</script>\n" +
"```\n\n" +
"---\n\n" +
"## üé® GESTION LAYOUT\n\n" +
"**Si pageType = \"single\" :**\n" +
"- Tout sur une seule page avec scroll\n" +
"- Sections s√©par√©es visuellement\n" +
"- Menu ancres pour navigation rapide\n\n" +
"**Si pageType = \"multi\" :**\n" +
"- Plusieurs √©crans avec boutons Suivant/Pr√©c√©dent\n" +
"- Barre de progression (1/5, 2/5...)\n" +
"- Sauvegarder progression en sessionStorage\n\n" +
"**Si helpPosition = \"left\" ou \"right\" :**\n" +
"- Cr√©er sidebar fixe " + (promptData.layout.helpPosition === 'left' ? '√† gauche' : promptData.layout.helpPosition === 'right' ? '√† droite' : 'aucune') + "\n" +
"- Contenu principal √† c√¥t√©\n" +
"- Responsive : sidebar en bas sur mobile\n" +
"- Contenu sidebar : conseils parents, statistiques\n\n" +
"---\n\n" +
"## ‚ö†Ô∏è DERNIERS RAPPELS CRITIQUES\n\n" +
"1. **UN SEUL FICHIER HTML** - Tout inline (CSS + JS)\n" +
"2. **AUCUNE D√âPENDANCE EXTERNE** - Z√©ro CDN, z√©ro <link>, z√©ro <script src>\n" +
"3. **DOIT MARCHER OFFLINE** √† 100%\n" +
"4. **TOUJOURS TRILINGUE** FR/AR/EN avec drapeaux\n" +
"5. **GESTION ERREURS** : Pr√©voir tous cas de ressources manquantes\n" +
"6. **RESPONSIVE** : Tester mentalement 320px, 768px, 1920px\n" +
"7. **ACCESSIBLE** : WCAG 2.1 AA minimum\n" +
"8. **S√âCURIS√â** : Aucun lien externe, aucune collecte donn√©es\n\n" +
"---\n\n" +
"**üöÄ COMMENCE MAINTENANT PAR PROPOSER TON PLAN D√âTAILL√â EN FRAN√áAIS**\n" +
"**N'OUBLIE PAS : J'ATTENDS TON PLAN, PAS LE HTML DIRECTEMENT**";

            // Affichage dans modal
            document.getElementById('promptOutputModal').textContent = prompt;
            openResultModal();
        }
        
        // ===== COPIER PROMPT =====
        document.getElementById('copyBtnModal').addEventListener('click', function() {
            const promptText = document.getElementById('promptOutputModal').textContent;
            const btn = this;
            
            btn.classList.add('loading');
            btn.disabled = true;
            
            navigator.clipboard.writeText(promptText).then(function() {
                setTimeout(function() {
                    btn.classList.remove('loading');
                    btn.innerHTML = '<span>‚úÖ Copi√© !</span>';
                    
                    setTimeout(function() {
                        btn.innerHTML = '<span class="spinner"></span><span>üìã Copier le Prompt</span>';
                        btn.disabled = false;
                    }, 2500);
                }, 300); 
            }).catch(function(err) {
                btn.classList.remove('loading');
                btn.disabled = false;
                alert('‚ùå Erreur copie. S√©lectionnez manuellement le texte.');
                console.error('Erreur:', err);
            });
        });
        
        // ===== T√âL√âCHARGER TXT =====
        document.getElementById('downloadBtnModal').addEventListener('click', function() {
            const promptText = document.getElementById('promptOutputModal').textContent;
            const blob = new Blob([promptText], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            
            const theme = document.getElementById('theme').value.replace(/[^a-z0-9]/gi, '_').toLowerCase();
            const creator = document.getElementById('creatorName').value.replace(/[^a-z0-9]/gi, '_').toLowerCase();
            const timestamp = new Date().toISOString().slice(0,10);
            
            a.href = url;
            a.download = 'prompt_' + theme + '_' + creator + '_' + timestamp + '.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });
        
        // ===== RESET FORM =====
        document.getElementById('promptForm').addEventListener('reset', function() {
            setTimeout(function() {
                clearErrors();
                document.getElementById('creationDate').value = new Date().toLocaleDateString('fr-FR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                const savedName = localStorage.getItem(STORAGE_KEY_NAME);
                if (savedName) {
                    document.getElementById('creatorName').value = savedName;
                }
                updateProgress();
            }, 100);
        });
    </script>
</body>
</html>
