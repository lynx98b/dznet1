// ===== SCRIPT BASH INSTALLATION (copier-coller unique) =====
echo '#!/bin/bash
# G√©n√©rateur dznet1 v4.4.001 - Installation et correction
cat > generateur_dznet1_v4.4.html << '\''EOF'\''
<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CRRK6Z4D1X"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('\''js'\'', new Date());
    gtag('\''config'\'', '\''G-CRRK6Z4D1X'\'');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="G√©n√©rateur intelligent dznet1.com v4.4 - Contenu √©ducatif avec SEO, publicit√©, i18n FR/EN/AR, analytics" />
  <title>G√©n√©rateur v4.4 CORRIG√â - dznet1.com</title>

  <style>
    /* ===== VARIABLES & RESET ===== */
    :root{
      --primary:#4A90E2;--success:#27AE60;--warning:#F39C12;--danger:#E74C3C;--info:#3498DB;
      --bg-light:#F8F9FA;--text-dark:#2C3E50;--border:#DFE6E9;--shadow:rgba(0,0,0,0.1);
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'\''Segoe UI'\'',Tahoma,Geneva,Verdana,sans-serif;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      min-height:100vh;padding:20px;color:var(--text-dark)
    }
    
    .container{max-width:1100px;margin:0 auto;background:#fff;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.3);overflow:hidden}
    header{background:linear-gradient(135deg,var(--primary) 0%,#357ABD 100%);color:#fff;padding:30px;text-align:center;position:relative}
    header h1{font-size:26px;margin-bottom:10px}
    header .subtitle{font-size:13px;opacity:.9;background:rgba(255,255,255,0.2);padding:5px 15px;border-radius:20px;display:inline-block;margin-top:10px}
    .version-badge{position:absolute;top:15px;right:15px;background:rgba(255,255,255,.2);padding:5px 15px;border-radius:20px;font-size:12px;font-weight:600}
    
    /* ===== ALERTE IMPORTANTE ===== */
    .critical-alert {
      background: linear-gradient(135deg, #FFE4E1 0%, #FFCCCB 100%);
      border-left: 5px solid var(--danger);
      padding: 20px;
      margin: 20px;
      border-radius: 8px;
    }
    .critical-alert h3 {
      color: var(--danger);
      margin: 0 0 10px 0;
      font-size: 18px;
    }
    .requirement-check {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 5px 0;
      padding: 8px;
      background: white;
      border-radius: 6px;
    }
    .check-icon {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: white;
    }
    .check-icon.yes {
      background: var(--success);
    }
    .check-icon.no {
      background: var(--danger);
    }
    
    /* ===== AVERTISSEMENT MOBILE ===== */
    .mobile-warning {
      display: none;
      background: linear-gradient(135deg, #FFF3CD 0%, #FFE5B4 100%);
      border: 2px solid var(--warning);
      padding: 20px;
      margin: 20px;
      border-radius: 12px;
      text-align: center;
    }
    .mobile-warning h4 {
      color: var(--warning);
      margin: 0 0 10px 0;
      font-size: 16px;
    }
    .mobile-warning p {
      color: #856404;
      font-size: 14px;
      line-height: 1.5;
    }
    @media (max-width: 768px) {
      .mobile-warning {
        display: block;
      }
    }
    
    /* ===== MODE TEST/PROD ===== */
    .mode-selector {
      background: var(--warning);
      color: white;
      padding: 15px;
      margin: 20px;
      border-radius: 8px;
      text-align: center;
    }
    .mode-toggle {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      justify-content: center;
    }
    .mode-option {
      flex: 1;
      padding: 10px 20px;
      background: white;
      color: var(--text-dark);
      border: 2px solid transparent;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
      font-weight: 600;
    }
    .mode-option.active {
      background: var(--text-dark);
      color: white;
      border-color: white;
    }
    
    .form-wrapper{padding:40px}
    .metadata-section{background:#FFF9E6;padding:20px;border-radius:12px;margin-bottom:30px;border:2px solid var(--warning)}
    .technical-section{background:#E3F2FD;padding:20px;border-radius:12px;margin-bottom:30px;border:2px solid var(--info)}
    .section{margin-bottom:40px;padding-bottom:30px;border-bottom:2px solid var(--border)}
    .section:last-child{border-bottom:none}
    .section-title{font-size:20px;color:var(--primary);margin-bottom:20px;display:flex;align-items:center;gap:10px}
    .form-group{margin-bottom:20px;position:relative}
    label{display:block;font-weight:600;margin-bottom:8px;font-size:15px}
    label.required::after{content:" *";color:var(--danger)}
    
    .error-message{display:none;color:var(--danger);font-size:13px;font-weight:600;margin-top:5px;padding:8px 12px;background:#FADBD8;border-radius:4px;border-left:3px solid var(--danger)}
    .form-group.has-error .error-message{display:block;animation:shake .5s}
    @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-10px)}75%{transform:translateX(10px)}}
    
    input[type="text"],select,textarea{width:100%;padding:12px;border:2px solid var(--border);border-radius:8px;font-size:14px;transition:.3s;font-family:inherit}
    input:focus,select:focus,textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(74,144,226,.1)}
    textarea{min-height:80px;resize:vertical}
    
    .checkbox-group,.radio-group{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:12px}
    .checkbox-item,.radio-item{display:flex;align-items:center;gap:10px;padding:12px;background:var(--bg-light);border-radius:8px;cursor:pointer;transition:.3s;border:2px solid transparent}
    .checkbox-item:hover,.radio-item:hover{background:#E8F4F8;border-color:var(--primary)}
    input[type="checkbox"],input[type="radio"]{width:20px;height:20px;cursor:pointer;flex-shrink:0}
    
    /* ===== CHECKLIST EXIGENCES ===== */
    .requirements-checklist {
      background: white;
      border: 2px solid var(--primary);
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
    }
    .requirements-checklist h4 {
      color: var(--primary);
      margin: 0 0 15px 0;
    }
    .req-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 0;
      border-bottom: 1px solid var(--border);
    }
    .req-item:last-child {
      border-bottom: none;
    }
    .req-checkbox {
      width: 24px;
      height: 24px;
    }
    .req-label {
      flex: 1;
      font-size: 14px;
    }
    .req-tag {
      background: var(--bg-light);
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      color: var(--primary);
    }
    
    /* ===== NAVIGATION CLARITY ===== */
    .navigation-explanation {
      background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
      border: 2px solid var(--success);
      padding: 20px;
      margin: 20px 0;
      border-radius: 12px;
    }
    .navigation-explanation h4 {
      color: var(--success);
      margin: 0 0 15px 0;
      font-size: 16px;
    }
    .nav-type {
      display: flex;
      align-items: center;
      gap: 15px;
      margin: 10px 0;
      padding: 10px;
      background: white;
      border-radius: 8px;
    }
    .nav-type .icon {
      font-size: 24px;
    }
    .nav-type .description {
      flex: 1;
    }
    .nav-type .color-sample {
      padding: 5px 15px;
      border-radius: 6px;
      color: white;
      font-weight: 600;
      font-size: 12px;
    }
    
    .button-group{display:flex;gap:15px;flex-wrap:wrap;margin-top:30px}
    button{padding:15px 30px;font-size:16px;font-weight:600;border:none;border-radius:8px;cursor:pointer;transition:.3s;display:flex;align-items:center;gap:10px;justify-content:center}
    button:disabled{opacity:.5;cursor:not-allowed}
    .btn-primary{background:var(--primary);color:#fff;flex:1;min-width:200px}
    .btn-primary:hover:not(:disabled){background:#357ABD;transform:translateY(-2px);box-shadow:0 5px 15px rgba(74,144,226,.4)}
    .btn-success{background:var(--success);color:#fff}
    .btn-warning{background:var(--warning);color:#fff}
    .btn-secondary{background:var(--border);color:var(--text-dark)}
    .btn-copy{background:var(--info);color:#fff;flex:1;min-width:200px}
    .btn-copy:hover:not(:disabled){background:#2980B9;transform:translateY(-2px);box-shadow:0 5px 15px rgba(52,152,219,.4)}
    
    .spinner{display:none;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    button.loading .spinner{display:block}
    button.loading span:not(.spinner){display:none}
    
    .helper-text{font-size:13px;color:#7F8C8D;margin-top:5px;font-style:italic}
    .info-banner{background:#E3F2FD;border-left:4px solid var(--info);padding:15px;margin:20px 0;border-radius:4px;font-size:14px}
    .warning-banner{background:#FFF3CD;border-left:4px solid var(--warning);padding:15px;margin:20px 0;border-radius:4px;font-size:14px}
    
    /* ===== PREVIEW PROMPT ===== */
    .prompt-preview {
      background: #2C3E50;
      color: #ECF0F1;
      padding: 20px;
      border-radius: 8px;
      font-family: '\''Courier New'\'', monospace;
      font-size: 12px;
      max-height: 400px;
      overflow-y: auto;
      margin: 20px 0;
      display: none;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .prompt-preview.active {
      display: block;
    }
    .prompt-highlight {
      color: #F39C12;
      font-weight: bold;
    }
    
    /* ===== TOAST NOTIFICATION ===== */
    .toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--success);
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      font-weight: 600;
      z-index: 9999;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
      pointer-events: none;
    }
    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }
    .toast.error {
      background: var(--danger);
    }
    
    @media (max-width:768px){
      body{padding:10px}
      .form-wrapper{padding:20px}
      header h1{font-size:20px}
      .button-group{flex-direction:column}
      button{width:100%}
      .mode-toggle{flex-direction:column}
      .toast {
        bottom: 20px;
        right: 20px;
        left: 20px;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- HEADER -->
    <header>
      <span class="version-badge">v4.4 CORRIG√â</span>
      <h1>üöÄ G√©n√©rateur dznet1.com - Version COMPL√àTE</h1>
      <div class="subtitle">
        SEO ‚Ä¢ Publicit√© ‚Ä¢ i18n FR/EN/AR ‚Ä¢ Analytics ‚Ä¢ Footer + Navigation distants ‚Ä¢ Palette Couleurs
      </div>
    </header>

    <!-- AVERTISSEMENT MOBILE -->
    <div class="mobile-warning">
      <h4>üì± Exp√©rience optimale sur PC/Tablette</h4>
      <p>
        Ce g√©n√©rateur est optimis√© pour une utilisation sur ordinateur ou tablette.
        <br>Pour une meilleure exp√©rience de cr√©ation, nous recommandons d'\''utiliser un √©cran plus large.
      </p>
    </div>

    <!-- ALERTE CRITIQUE -->
    <div class="critical-alert">
      <h3>‚ö†Ô∏è EXIGENCES OBLIGATOIRES dznet1.com</h3>
      <div class="requirement-check">
        <span class="check-icon yes">‚úì</span>
        <span>SEO complet (H1, metas, JSON-LD)</span>
      </div>
      <div class="requirement-check">
        <span class="check-icon yes">‚úì</span>
        <span>Zone publicitaire apr√®s header</span>
      </div>
      <div class="requirement-check">
        <span class="check-icon yes">‚úì</span>
        <span>Logo sticky + Footer + Navigation distants</span>
      </div>
      <div class="requirement-check">
        <span class="check-icon yes">‚úì</span>
        <span>i18n FR/EN/AR avec s√©lecteur</span>
      </div>
      <div class="requirement-check">
        <span class="check-icon yes">‚úì</span>
        <span>Analytics Google (gtag.js)</span>
      </div>
      <div class="requirement-check">
        <span class="check-icon yes">‚úì</span>
        <span>1-3 pages MAX selon √¢ge</span>
      </div>
      <div class="requirement-check">
        <span class="check-icon yes">‚úì</span>
        <span>Palette couleurs adapt√©e WCAG AA</span>
      </div>
    </div>

    <!-- EXPLICATION NAVIGATIONS -->
    <div class="navigation-explanation" style="margin: 20px;">
      <h4>üß≠ Clarification : 2 Types de Navigation Distincts</h4>
      <div class="nav-type">
        <span class="icon">1Ô∏è‚É£</span>
        <div class="description">
          <strong>Navigation GLOBALE (navigator.html)</strong>
          <br>Entre fichiers HTML diff√©rents (jeux001.html ‚Üí jeux002.html)
          <br><em>Charg√©e automatiquement, ne pas toucher</em>
        </div>
        <span class="color-sample" style="background: #4A6FA5;">BLEU</span>
      </div>
      <div class="nav-type">
        <span class="icon">2Ô∏è‚É£</span>
        <div class="description">
          <strong>Navigation INTERNE CSS</strong>
          <br>Entre pages/sections dans le M√äME fichier
          <br><em>√Ä cr√©er si contenu > 1 page</em>
        </div>
        <span class="color-sample" style="background: #E67E22;">ORANGE</span>
      </div>
    </div>

    <!-- MODE TEST/PRODUCTION -->
    <div class="mode-selector">
      <h3>üîß Mode de g√©n√©ration</h3>
      <div class="mode-toggle">
        <div class="mode-option active" data-mode="test" id="modeTest">
          üß™ TEST LOCAL
          <br><small>Chemins /images/ et /audio/</small>
        </div>
        <div class="mode-option" data-mode="production" id="modeProduction">
          üåê PRODUCTION
          <br><small>CDN dznet1.com</small>
        </div>
      </div>
    </div>

    <!-- FORMULAIRE -->
    <div class="form-wrapper">
      <form id="promptForm">
        
        <!-- INFORMATIONS PROJET -->
        <div class="metadata-section">
          <h3 style="color:var(--warning);">üìù Informations du Projet</h3>
          <div class="form-group">
            <label for="creatorName" class="required">Cr√©ateur</label>
            <input type="text" id="creatorName" placeholder="Votre nom" required>
            <div class="error-message">Champ obligatoire</div>
          </div>
          <div class="form-group">
            <label for="projectCategory" class="required">Cat√©gorie (pour SEO)</label>
            <select id="projectCategory" required>
              <option value="">‚Äî S√©lectionner ‚Äî</option>
              <option value="√âducatif">√âducatif</option>
              <option value="Ludique">Ludique</option>
              <option value="Cr√©atif">Cr√©atif</option>
              <option value="Scientifique">Scientifique</option>
              <option value="Linguistique">Linguistique</option>
              <option value="Math√©matique">Math√©matique</option>
            </select>
            <div class="error-message">Champ obligatoire</div>
          </div>
        </div>

        <!-- EXIGENCES TECHNIQUES -->
        <div class="technical-section">
          <h3 style="color:var(--info);">‚öôÔ∏è Configuration Technique dznet1.com</h3>
          <div class="requirements-checklist">
            <h4>√âl√©ments obligatoires √† inclure :</h4>
            <div class="req-item">
              <input type="checkbox" class="req-checkbox" id="reqSEO" checked disabled>
              <label class="req-label" for="reqSEO">SEO optimis√© (H1 suffix√©, metas, JSON-LD)</label>
              <span class="req-tag">AUTO</span>
            </div>
            <div class="req-item">
              <input type="checkbox" class="req-checkbox" id="reqPub" checked disabled>
              <label class="req-label" for="reqPub">Publicit√© partenaire apr√®s header</label>
              <span class="req-tag">AUTO</span>
            </div>
            <div class="req-item">
              <input type="checkbox" class="req-checkbox" id="reqLogo" checked disabled>
              <label class="req-label" for="reqLogo">Logo dznet1.com sticky</label>
              <span class="req-tag">AUTO</span>
            </div>
            <div class="req-item">
              <input type="checkbox" class="req-checkbox" id="reqNav" checked disabled>
              <label class="req-label" for="reqNav">Navigation distante (navigator.html)</label>
              <span class="req-tag">AUTO</span>
            </div>
            <div class="req-item">
              <input type="checkbox" class="req-checkbox" id="reqFooter" checked disabled>
              <label class="req-label" for="reqFooter">Footer distant charg√© dynamiquement</label>
              <span class="req-tag">AUTO</span>
            </div>
            <div class="req-item">
              <input type="checkbox" class="req-checkbox" id="reqI18n" checked>
              <label class="req-label" for="reqI18n">Multilingue FR/EN/AR avec drapeaux</label>
            </div>
            <div class="req-item">
              <input type="checkbox" class="req-checkbox" id="reqAnalytics" checked disabled>
              <label class="req-label" for="reqAnalytics">Google Analytics (G-CRRK6Z4D1X)</label>
              <span class="req-tag">AUTO</span>
            </div>
            <div class="req-item">
              <input type="checkbox" class="req-checkbox" id="reqResponsive" checked disabled>
              <label class="req-label" for="reqResponsive">CSS responsive dznet1.com</label>
              <span class="req-tag">AUTO</span>
            </div>
            <div class="req-item">
              <input type="checkbox" class="req-checkbox" id="reqAccessibility" checked>
              <label class="req-label" for="reqAccessibility">Accessibilit√© WCAG 2.1 AA</label>
            </div>
            <div class="req-item">
              <input type="checkbox" class="req-checkbox" id="reqPalette" checked disabled>
              <label class="req-label" for="reqPalette">Palette couleurs adapt√©e au sujet</label>
              <span class="req-tag">AUTO</span>
            </div>
          </div>
        </div>

        <!-- 1Ô∏è‚É£ PUBLIC CIBLE -->
        <div class="section">
          <h2 class="section-title">1Ô∏è‚É£ Public Cible (d√©termine les limites)</h2>
          <div class="form-group" id="ageGroup">
            <label class="required">Tranche d'\''√¢ge</label>
            <div class="radio-group">
              <label class="radio-item">
                <input type="radio" name="ageRange" value="3-4" required>
                <span>üë∂ 3-4 ans (1 page, 300 mots max)</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="ageRange" value="5-6">
                <span>üßí 5-6 ans (2 pages, 500 mots max)</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="ageRange" value="7-8">
                <span>üë¶ 7-8 ans (2 pages, 800 mots max)</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="ageRange" value="9-10">
                <span>üëß 9-10 ans (3 pages, 1200 mots max)</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="ageRange" value="11-12">
                <span>üßë 11-12 ans (3 pages, 1500 mots max)</span>
              </label>
            </div>
            <div class="error-message">S√©lectionnez une tranche d'\''√¢ge</div>
          </div>
        </div>

        <!-- 2Ô∏è‚É£ CONTENU -->
        <div class="section">
          <h2 class="section-title">2Ô∏è‚É£ Contenu Principal</h2>
          <div class="form-group">
            <label for="contentType" class="required">Type de contenu</label>
            <select id="contentType" required>
              <option value="">‚Äî S√©lectionner ‚Äî</option>
              <option value="histoire">Histoire interactive</option>
              <option value="jeu_educatif">Jeu √©ducatif</option>
              <option value="quiz">Quiz/QCM</option>
              <option value="coloriage">Coloriage</option>
              <option value="exercice">Exercice</option>
            </select>
            <div class="error-message">Choisissez un type</div>
          </div>
          
          <div class="form-group">
            <label for="theme" class="required">Th√®me/Sujet</label>
            <input type="text" id="theme" placeholder="Ex: Les animaux de la ferme" required maxlength="60">
            <div class="error-message">D√©crivez le th√®me</div>
            <span class="helper-text">Ce titre sera utilis√© pour le SEO et le H1</span>
          </div>

          <div class="form-group">
            <label for="metaDescription">Meta description SEO (150-160 caract√®res)</label>
            <textarea id="metaDescription" maxlength="160" placeholder="Description courte pour Google..."></textarea>
            <span class="helper-text">Si vide, sera g√©n√©r√©e automatiquement</span>
          </div>
        </div>

        <!-- 3Ô∏è‚É£ OBJECTIFS -->
        <div class="section">
          <h2 class="section-title">3Ô∏è‚É£ Objectifs P√©dagogiques</h2>
          <div class="form-group">
            <label>Objectifs principaux (max 5)</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" name="objectives" value="Reconnaissance couleurs">
                <span>Reconnaissance couleurs</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="objectives" value="Comptage nombres">
                <span>Comptage nombres</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="objectives" value="Alphabet et lettres">
                <span>Alphabet et lettres</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="objectives" value="Formes g√©om√©triques">
                <span>Formes g√©om√©triques</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="objectives" value="Vocabulaire">
                <span>Vocabulaire</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" name="objectives" value="Logique et s√©quences">
                <span>Logique et s√©quences</span>
              </label>
            </div>
          </div>
        </div>

        <!-- 4Ô∏è‚É£ OPTIONS -->
        <div class="section">
          <h2 class="section-title">4Ô∏è‚É£ Options Suppl√©mentaires</h2>
          <div class="form-group">
            <label class="checkbox-item">
              <input type="checkbox" id="generatePaper" name="generatePaper">
              <span>üìÑ G√©n√©rer version papier Word/PDF</span>
            </label>
          </div>
          <div class="form-group">
            <label class="checkbox-item">
              <input type="checkbox" id="includeAudio" name="includeAudio" checked>
              <span>üîä Inclure narration audio</span>
            </label>
          </div>
          <div class="form-group">
            <label class="checkbox-item">
              <input type="checkbox" id="addProgressBar" name="addProgressBar" checked>
              <span>üìä Ajouter barre de progression (multi-pages)</span>
            </label>
          </div>
        </div>

        <!-- PREVIEW -->
        <div class="section">
          <h2 class="section-title">üëÅÔ∏è Aper√ßu du Prompt</h2>
          <button type="button" class="btn-warning" id="previewBtn">
            <span>Afficher l'\''aper√ßu</span>
          </button>
          <div class="prompt-preview" id="promptPreview"></div>
        </div>

        <!-- BOUTONS -->
        <div class="button-group">
          <button type="submit" class="btn-primary">
            <span class="spinner"></span>
            <span>üöÄ G√©n√©rer le Prompt Complet</span>
          </button>
          <button type="button" class="btn-copy" id="copyBtn">
            <span>üìã Copier le Prompt</span>
          </button>
          <button type="reset" class="btn-secondary">üîÑ R√©initialiser</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // ===== CONFIGURATION v4.4.001 =====
    const VERSION = "v4.4";
    const STORAGE_KEY = '\''dznet1_generator_v4'\'';
    let currentMode = '\''test'\''; // test ou production
    
    // ===== PROFILS PAR √ÇGE =====
    const AGE_LIMITS = {
      '\''3-4'\'': { pages: 1, words: 300, visual: 70 },
      '\''5-6'\'': { pages: 2, words: 500, visual: 50 },
      '\''7-8'\'': { pages: 2, words: 800, visual: 40 },
      '\''9-10'\'': { pages: 3, words: 1200, visual: 30 },
      '\''11-12'\'': { pages: 3, words: 1500, visual: 20 }
    };
    
    // ===== TEMPLATE PROMPT COMPLET CORRIG√â =====
    function generateCompletePrompt() {
      const creator = document.getElementById('\''creatorName'\'').value.trim();
      const category = document.getElementById('\''projectCategory'\'').value;
      const age = document.querySelector('\''input[name="ageRange"]:checked'\'')?.value || '\''7-8'\'';
      const contentType = document.getElementById('\''contentType'\'').value;
      const theme = document.getElementById('\''theme'\'').value.trim();
      const metaDesc = document.getElementById('\''metaDescription'\'').value.trim() || 
                       `${theme} - Contenu √©ducatif interactif pour enfants ${age} ans. Apprentissage ludique sur dznet1.com`;
      
      const objectives = Array.from(document.querySelectorAll('\''input[name="objectives"]:checked'\''))
                              .map(cb => cb.value);
      
      const limits = AGE_LIMITS[age];
      const includeI18n = document.getElementById('\''reqI18n'\'').checked;
      const includeAudio = document.getElementById('\''includeAudio'\'').checked;
      const generatePaper = document.getElementById('\''generatePaper'\'').checked;
      const addProgressBar = document.getElementById('\''addProgressBar'\'').checked;
      
      const testMode = currentMode === '\''test'\'';
      
      // Template string corrig√© avec √©chappements appropri√©s
      const prompt = `# üöÄ PROMPT COMPLET dznet1.com - ${theme.toUpperCase()}
## Version: ${VERSION} | Mode: ${testMode ? '\''TEST LOCAL'\'' : '\''PRODUCTION'\''} | √Çge: ${age} ans

## ‚ö†Ô∏è CONTRAINTES STRICTES
- **PAGES:** ${limits.pages} MAXIMUM
- **MOTS TOTAL:** ${limits.words} MAXIMUM  
- **RATIO VISUEL:** ${limits.visual}% images, ${100-limits.visual}% texte

## üîÄ DISTINCTION NAVIGATION (IMPORTANT - LIRE EN PREMIER)

### ‚ö° AVERTISSEMENT MOBILE
<!-- COMMENTAIRE OBLIGATOIRE DANS LE HTML G√âN√âR√â -->
<!-- 
‚ö†Ô∏è EXP√âRIENCE OPTIMALE : Ce contenu √©ducatif est optimis√© pour une utilisation 
sur PC ou tablette. L'\''affichage sur smartphone, bien que fonctionnel, 
n'\''offre pas l'\''exp√©rience interactive compl√®te pr√©vue pour l'\''apprentissage.
Nous recommandons vivement l'\''utilisation d'\''un √©cran plus large.
-->

**Il y a DEUX syst√®mes de navigation distincts :**

### 1Ô∏è‚É£ Navigation ENTRE FICHIERS HTML (navigator.html - AUTOMATIQUE)
‚úÖ **D√©j√† g√©r√© par dznet1.com, tu n'\''as RIEN √† faire**
- Fichier : navigator.html charg√© automatiquement via fetch
- Fonction : Passer d'\''un fichier HTML √† l'\''autre (jeux001.html ‚Üí jeux002.html)
- Position : En haut de page, sticky top, couleur bleu (#4A6FA5)
- Boutons : "‚óÄ Activit√© Pr√©c√©dente" | "Activit√© Suivante ‚ñ∂" | "üè† Menu" | "‚úì Termin√©"
- **NE JAMAIS cr√©er ou modifier cette navigation**

### 2Ô∏è‚É£ Navigation DANS LE FICHIER (pages CSS internes - √Ä CR√âER SI ${limits.pages} > 1)
‚ö†Ô∏è **√Ä coder UNIQUEMENT si ton contenu a plusieurs pages (${limits.pages} page(s) ici)**
- Fonction : Naviguer entre sections/pages DANS le m√™me fichier HTML
- Position : En BAS du contenu ou dans le flux
- Couleur : ORANGE/ACCENT (#E67E22) - **DIFF√âRENT du bleu de navigator.html**
- Boutons : "üìÑ Page 1" | "üìÑ Page 2" | "üìÑ Page 3"
- Technique : CSS (display: none/block) + JavaScript simple
${addProgressBar && limits.pages > 1 ? '\''- Inclure une barre de progression visuelle'\'' : '\'''\''}

### ‚ö†Ô∏è R√àGLES STRICTES
1. **NE JAMAIS toucher √† navigator.html** (charg√© automatiquement)
2. **NE PAS cr√©er de navigation "Pr√©c√©dent/Suivant" similaire**
3. Si ${limits.pages} = 1 page ‚Üí **AUCUNE navigation interne**
4. Si ${limits.pages} > 1 ‚Üí Navigation = **style DIFF√âRENT** (orange, ic√¥nes uniques)

${limits.pages > 1 ? `
### ‚úÖ Exemple navigation interne correcte (${limits.pages} pages) :
\`\`\`html
<!-- APR√àS le contenu principal, AVANT le footer -->
<nav class="internal-pages-nav" style="
  background: var(--accent, #E67E22);
  padding: 20px;
  border-radius: 12px;
  margin: 30px 0;
  display: flex;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
">
${addProgressBar ? `  <!-- Barre de progression -->
  <div class="progress-bar" style="
    width: 100%;
    height: 8px;
    background: rgba(255,255,255,0.3);
    border-radius: 4px;
    margin-bottom: 15px;
  ">
    <div id="progress-fill" style="
      width: 33.33%;
      height: 100%;
      background: white;
      border-radius: 4px;
      transition: width 0.3s ease;
    "></div>
  </div>
` : '\'''\''}
  <button onclick="showPage(1)" class="page-btn active" id="btn-page-1" style="
    background: white;
    color: var(--accent);
    padding: 12px 20px;
    border: 2px solid var(--accent);
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.3s;
  ">üìÑ Page 1</button>
  
  <button onclick="showPage(2)" class="page-btn" id="btn-page-2" style="
    background: white;
    color: var(--accent);
    padding: 12px 20px;
    border: 2px solid var(--accent);
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.3s;
  ">üìÑ Page 2</button>
  
${limits.pages === 3 ? `  <button onclick="showPage(3)" class="page-btn" id="btn-page-3" style="
    background: white;
    color: var(--accent);
    padding: 12px 20px;
    border: 2px solid var(--accent);
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.3s;
  ">üìÑ Page 3</button>
` : '\'''\''}
</nav>

<script>
// Gestion pages internes (v4.4.001)
function showPage(pageNum) {
  // Cacher toutes les pages
  document.querySelectorAll('\''.content-page'\'').forEach(page => {
    page.style.display = '\''none'\'';
  });
  
  // Afficher la page demand√©e
  const targetPage = document.getElementById('\''page-'\'' + pageNum);
  if (targetPage) {
    targetPage.style.display = '\''block'\'';
  }
  
  // Mettre √† jour boutons
  document.querySelectorAll('\''.page-btn'\'').forEach(btn => {
    btn.style.background = '\''white'\'';
    btn.style.color = '\''var(--accent)'\'';
    btn.classList.remove('\''active'\'');
  });
  
  const activeBtn = document.getElementById('\''btn-page-'\'' + pageNum);
  if (activeBtn) {
    activeBtn.style.background = '\''var(--accent)'\'';
    activeBtn.style.color = '\''white'\'';
    activeBtn.classList.add('\''active'\'');
  }
  
${addProgressBar ? `  // Mettre √† jour la barre de progression
  const progressFill = document.getElementById('\''progress-fill'\'');
  if (progressFill) {
    const progressPercent = (pageNum / ${limits.pages}) * 100;
    progressFill.style.width = progressPercent + '\''%'\'';
  }
` : '\'''\''}
}

// Afficher page 1 au chargement
document.addEventListener('\''DOMContentLoaded'\'', function() {
  showPage(1);
});
<script>
\`\`\`
` : '\'''\''}

---

## üé® √âTAPE 1: G√âN√âRATION PALETTE COULEURS

G√©n√®re une PALETTE JSON pour: "${theme}" (${age} ans).

**Contraintes:**
- WCAG AA: contraste texte/primaire ‚â• 4.5, texte/surface ‚â• 7.0
- Couleurs adapt√©es √† l'\''√¢ge et au th√®me
- 8 cl√©s obligatoires

\`\`\`json
{
  "primary": "#xxxxxx",
  "onPrimary": "#xxxxxx",
  "secondary": "#xxxxxx",
  "onSecondary": "#xxxxxx",
  "surface": "#xxxxxx",
  "onSurface": "#xxxxxx",
  "accent": "#xxxxxx",
  "oklch_meta": {
    "notes": "Palette ${theme}, √¢ge ${age}, cat√©gorie ${category}",
    "contrastChecks": {
      "onPrimary": 4.5,
      "onSurface": 7.0
    }
  }
}
\`\`\`

---

## üìã √âTAPE 2: STRUCTURE HTML OBLIGATOIRE

### HEAD complet avec tous les √©l√©ments requis
[Structure HTML compl√®te avec SEO, Analytics, etc.]

### BODY avec commentaire mobile et structure
[Corps du document avec navigation correcte]

---

## üìä √âTAPE 3: TABLEAU M√âDIAS ATTENDUS

${testMode ? `**MODE TEST - Tableau des m√©dias locaux :**

| √âl√©ment | FR | EN | AR | Image | Audio FR | Audio EN | Audio AR |
|---------|----|----|-------|--------|---------|----------|----------|
| Titre | ${theme} | [EN] | [AR] | images/titre.jpg | audio/titre_fr.mp3 | audio/titre_en.mp3 | audio/titre_ar.mp3 |
| ... | ... | ... | ... | ... | ... | ... | ... |
` : '\''**MODE PRODUCTION - Utiliser CDN dznet1.com**'\''}

---

## ‚úÖ CHECKLIST FINALE v4.4

- [ ] Palette JSON avec contrastes valid√©s
- [ ] HTML avec commentaire mobile obligatoire
- [ ] SEO complet (H1, metas, JSON-LD)
- [ ] Publicit√© apr√®s header
- [ ] Logo sticky + Navigation + Footer distants
- [ ] ${includeI18n ? '\''i18n FR/EN/AR'\'' : '\''Monolingue FR'\''}
- [ ] Analytics configur√©
- [ ] CSS responsive
- [ ] WCAG 2.1 AA
- [ ] ${limits.pages} page(s) MAX respect√©es
- [ ] ${limits.words} mots MAX respect√©s
${limits.pages > 1 ? '\''- [ ] Navigation interne ORANGE diff√©rente'\'' : '\'''\''}
${addProgressBar && limits.pages > 1 ? '\''- [ ] Barre de progression'\'' : '\'''\''}
${generatePaper ? '\''- [ ] Version papier Word/PDF'\'' : '\'''\''}

**‚ö° G√âN√àRE MAINTENANT !**`;

      return prompt;
    }
    
    // ===== TOAST NOTIFICATION v4.4.002 =====
    function showToast(message, type = '\''success'\'') {
      const existingToast = document.querySelector('\''.toast'\'');
      if (existingToast) {
        existingToast.remove();
      }
      
      const toast = document.createElement('\''div'\'');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => toast.classList.add('\''show'\''), 10);
      
      setTimeout(() => {
        toast.classList.remove('\''show'\'');
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }
    
    // ===== EVENT LISTENERS v4.4.003 =====
    document.addEventListener('\''DOMContentLoaded'\'', function() {
      // Mode toggle
      document.querySelectorAll('\''.mode-option'\'').forEach(option => {
        option.addEventListener('\''click'\'', function() {
          document.querySelectorAll('\''.mode-option'\'').forEach(o => o.classList.remove('\''active'\''));
          this.classList.add('\''active'\'');
          currentMode = this.dataset.mode;
          showToast(`Mode ${currentMode === '\''test'\'' ? '\''TEST LOCAL'\'' : '\''PRODUCTION'\''} activ√©`, '\''success'\'');
        });
      });
      
      // Preview button
      document.getElementById('\''previewBtn'\'').addEventListener('\''click'\'', function() {
        const preview = document.getElementById('\''promptPreview'\'');
        if (preview.classList.contains('\''active'\'')) {
          preview.classList.remove('\''active'\'');
          this.textContent = '\''Afficher l'\''aper√ßu'\'';
        } else {
          preview.textContent = generateCompletePrompt();
          preview.classList.add('\''active'\'');
          this.textContent = '\''Masquer l'\''aper√ßu'\'';
        }
      });
      
      // Copy button
      document.getElementById('\''copyBtn'\'').addEventListener('\''click'\'', async function() {
        try {
          const creatorName = document.getElementById('\''creatorName'\'').value.trim();
          const theme = document.getElementById('\''theme'\'').value.trim();
          
          if (!creatorName) {
            showToast('\''‚ö†Ô∏è Nom du cr√©ateur requis'\'', '\''error'\'');
            document.getElementById('\''creatorName'\'').focus();
            return;
          }
          
          if (!theme) {
            showToast('\''‚ö†Ô∏è Th√®me requis'\'', '\''error'\'');
            document.getElementById('\''theme'\'').focus();
            return;
          }
          
          const prompt = generateCompletePrompt();
          
          // Tentative avec API moderne
          if (navigator.clipboard && window.isSecureContext) {
            await navigator.clipboard.writeText(prompt);
            showToast('\''‚úÖ Prompt copi√© dans le presse-papier !'\'', '\''success'\'');
          } else {
            // Fallback pour compatibilit√©
            const textarea = document.createElement('\''textarea'\'');
            textarea.value = prompt;
            textarea.style.position = '\''fixed'\'';
            textarea.style.left = '\''-9999px'\'';
            textarea.style.top = '\''0'\'';
            document.body.appendChild(textarea);
            textarea.focus();
            textarea.select();
            
            try {
              const success = document.execCommand('\''copy'\'');
              if (success) {
                showToast('\''‚úÖ Prompt copi√© (mode compatibilit√©)'\'', '\''success'\'');
              } else {
                throw new Error('\''execCommand failed'\'');
              }
            } catch (err) {
              showToast('\''‚ùå Erreur: copie manuelle requise'\'', '\''error'\'');
              console.error('\''Copy fallback failed:'\'', err);
            } finally {
              document.body.removeChild(textarea);
            }
          }
        } catch (error) {
          showToast('\''‚ùå Erreur lors de la copie'\'', '\''error'\'');
          console.error('\''Copy error:'\'', error);
        }
      });
      
      // Form submit
      document.getElementById('\''promptForm'\'').addEventListener('\''submit'\'', function(e) {
        e.preventDefault();
        
        const creatorName = document.getElementById('\''creatorName'\'').value.trim();
        const theme = document.getElementById('\''theme'\'').value.trim();
        
        if (!creatorName) {
          showToast('\''‚ö†Ô∏è Nom cr√©ateur requis'\'', '\''error'\'');
          return;
        }
        if (!theme) {
          showToast('\''‚ö†Ô∏è Th√®me requis'\'', '\''error'\'');
          return;
        }
        
        const prompt = generateCompletePrompt();
        const blob = new Blob([prompt], {type: '\''text/plain'\''});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('\''a'\'');
        a.href = url;
        a.download = `prompt_dznet1_${currentMode}_${Date.now()}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showToast('\''‚úÖ Prompt complet g√©n√©r√© et t√©l√©charg√© !'\'', '\''success'\'');
      });
      
      // Reset form
      document.getElementById('\''promptForm'\'').addEventListener('\''reset'\'', function() {
        setTimeout(() => {
          document.getElementById('\''promptPreview'\'').classList.remove('\''active'\'');
          document.getElementById('\''previewBtn'\'').textContent = '\''Afficher l'\''aper√ßu'\'';
          showToast('\''üîÑ Formulaire r√©initialis√©'\'', '\''success'\'');
        }, 100);
      });
      
      // Auto-save creator name
      const savedName = localStorage.getItem(STORAGE_KEY);
      if (savedName) {
        document.getElementById('\''creatorName'\'').value = savedName;
      }
      
      document.getElementById('\''creatorName'\'').addEventListener('\''blur'\'', function() {
        if (this.value.trim()) {
          localStorage.setItem(STORAGE_KEY, this.value.trim());
        }
      });
      
      // Validation en temps r√©el
      document.getElementById('\''creatorName'\'').addEventListener('\''input'\'', function() {
        const parent = this.closest('\''.form-group'\'');
        if (this.value.trim()) {
          parent.classList.remove('\''has-error'\'');
        }
      });
      
      document.getElementById('\''theme'\'').addEventListener('\''input'\'', function() {
        const parent = this.closest('\''.form-group'\'');
        if (this.value.trim()) {
          parent.classList.remove('\''has-error'\'');
        }
      });
    });
  </script>
</body>
</html>
 
