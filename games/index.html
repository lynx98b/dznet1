<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CRRK6Z4D1X"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-CRRK6Z4D1X');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sommaire des Jeux - DZNet</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }

    body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #333; min-height: 100vh; padding: 20px; }

    .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); overflow: hidden; }

    header { background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%); color: white; padding: 30px; text-align: center; }

    h1 { font-size: 2.5rem; margin-bottom: 10px; }
    .subtitle { font-size: 1.2rem; opacity: 0.9; }

    .stats { background: #f8f9fa; padding: 15px; text-align: center; border-bottom: 1px solid #dee2e6; }

    /* Filtre Ã¢ge */
    .filter-bar { background: #eef3ff; padding: 10px; text-align: center; }
    .filter-bar select { padding: 8px 12px; border-radius: 6px; border: 1px solid #bbb; font-size: 1rem; cursor: pointer; }

    .games-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; padding: 30px; }

    .game-card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); transition: 0.3s; border: 1px solid #e1e8ed; }
    .game-card:hover { transform: translateY(-5px); }

    .game-icon { background: #764ba2; height: 120px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
    .game-icon img { width: 100%; height: 100%; object-fit: cover; }

    .game-content { padding: 20px; }
    .game-title { font-size: 1.3rem; font-weight: 600; margin-bottom: 5px; }
    .meta-age { font-size: 0.85rem; font-weight: 600; color: #4b8cff; margin-bottom: 10px; }

    .game-description { color: #666; margin-bottom: 15px; line-height: 1.5; }

    .game-link { display: inline-block; background: #3498db; color: white; padding: 8px 16px; border-radius: 5px; text-decoration: none; transition: 0.3s; }
    .game-link:hover { background: #2980b9; }

    @media (max-width: 768px) { .games-grid { grid-template-columns: 1fr; padding: 20px; } }
  </style>
</head>

<body>
<div class="container">
  <header>
    <h1>ðŸŽ® Jeux de Culture GÃ©nÃ©rale</h1>
    <p class="subtitle">DÃ©couvrez tous nos jeux Ã©ducatifs et testez vos connaissances</p>
  </header>

  <div class="filter-bar">
    <label for="ageFilter">Filtrer par Ã¢ge :</label>
    <select id="ageFilter">
      <option value="all">Tous Ã¢ges</option>
      <option value="4">4+</option>
      <option value="6">6+</option>
      <option value="8">8+</option>
      <option value="10">10+</option>
      <option value="12">12+</option>
    </select>
  </div>

  <div class="stats" id="stats"><span id="gameCount">Chargement...</span></div>

  <div class="games-grid" id="gamesGrid"></div>
</div>

<script>
async function loadGames() {
  const gamesGrid = document.getElementById('gamesGrid');
  const stats = document.getElementById('gameCount');
  const ageFilter = document.getElementById('ageFilter');

  const data = await fetch("/index_global.json").then(r => r.json());
  let games = data;

  function render() {
    const selectedAge = ageFilter.value;

    const filtered = selectedAge === "all"
      ? games
      : games.filter(g => parseInt(g.age) >= parseInt(selectedAge));

    stats.textContent = `ðŸŽ® ${filtered.length} jeu(x) affichÃ©(s)`;

    gamesGrid.innerHTML = filtered.map(game => `
      <div class="game-card">
        <div class="game-icon">
          ${game.thumbnail ? `<img src="${game.thumbnail}" alt="${game.title}">` : "ðŸŽ¯"}
        </div>
        <div class="game-content">
          <h3 class="game-title">${game.title}</h3>
          <div class="meta-age">Ã‚ge : ${game.age}+</div>
          <p class="game-description">${game.description || ""}</p>
          <a href="${game.file}" class="game-link">Jouer maintenant</a>
        </div>
      </div>`).join('');
  }

  ageFilter.addEventListener('change', render);
  render();
}

document.addEventListener('DOMContentLoaded', loadGames);
</script>

</body>
</html>
