<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CRRK6Z4D1X"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-CRRK6Z4D1X');
  </script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sous le Palmier üå¥ - Amina en Alg√©rie</title>
    <!-- 
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    PROJET: Sous le Palmier - Histoire Interactive Alg√©rienne
    VERSION: v1.0
    CR√âATEUR: mohamed
    DATE: 3 novembre 2025
    TH√àME: Culture alg√©rienne dans une oasis
    PERSONNAGE: Amina (guide enfant)
    PUBLIC: 3-6 ans (Petite section √† CP)
    LANGUES: Fran√ßais + Arabe
    ACTIVIT√âS: Compter (1-10), Couleurs, Quiz culturel
    POIDS CIBLE: < 150 KB
    COMPATIBILIT√â: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
    ACCESSIBILIT√â: WCAG 2.1 AA
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    -->
    <style>
        /* ‚ïê‚ïê‚ïê RESET & BASE ‚ïê‚ïê‚ïê */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
            background: linear-gradient(180deg, #87CEEB 0%, #F4E8C1 50%, #DEB887 100%);
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
        }

        /* ‚ïê‚ïê‚ïê CONTENEUR PRINCIPAL ‚ïê‚ïê‚ïê */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
        }

        /* ‚ïê‚ïê‚ïê EN-T√äTE ‚ïê‚ïê‚ïê */
        .header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }

        .title {
            font-size: clamp(24px, 5vw, 48px);
            color: #2E7D32;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: clamp(14px, 3vw, 20px);
            color: #D2691E;
        }

        /* ‚ïê‚ïê‚ïê CHRONOM√àTRE & √âTOILES ‚ïê‚ïê‚ïê */
        .stats-bar {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 15px;
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
        }

        .timer {
            font-size: 16px;
            color: #2E7D32;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stars {
            display: flex;
            gap: 5px;
            font-size: 24px;
        }

        .star {
            opacity: 0.3;
            transition: opacity 0.3s;
        }

        .star.earned {
            opacity: 1;
            animation: starPop 0.5s ease-out;
        }

        @keyframes starPop {
            0% { transform: scale(0); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        /* ‚ïê‚ïê‚ïê S√âLECTEUR DE LANGUE ‚ïê‚ïê‚ïê */
        .language-selector {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 15px;
            font-size: 28px;
            cursor: pointer;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        .lang-btn:hover {
            transform: scale(1.1);
        }

        .lang-btn.active {
            background: #FFD700;
            transform: scale(1.15);
        }

        /* ‚ïê‚ïê‚ïê √âCRANS ‚ïê‚ïê‚ïê */
        .screen {
            display: none;
            min-height: 500px;
            animation: fadeIn 0.5s ease-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ‚ïê‚ïê‚ïê √âCRAN D'ACCUEIL ‚ïê‚ïê‚ïê */
        .welcome-screen {
            text-align: center;
            background: white;
            padding: 40px 20px;
            border-radius: 30px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            margin-top: 80px;
        }

        .amina-character {
            font-size: 120px;
            margin-bottom: 20px;
            animation: wave 2s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }

        .welcome-text {
            font-size: clamp(18px, 4vw, 28px);
            color: #2E7D32;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .start-btn {
            padding: 20px 50px;
            font-size: clamp(20px, 4vw, 32px);
            font-weight: bold;
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }

        .start-btn:hover {
            transform: scale(1.05);
        }

        /* ‚ïê‚ïê‚ïê ACTIVIT√â 1 : COMPTER ‚ïê‚ïê‚ïê */
        .counting-screen {
            background: white;
            padding: 30px 20px;
            border-radius: 30px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        .activity-title {
            text-align: center;
            font-size: clamp(20px, 4vw, 32px);
            color: #2E7D32;
            margin-bottom: 20px;
        }

        .instruction {
            text-align: center;
            font-size: clamp(16px, 3vw, 24px);
            color: #D2691E;
            margin-bottom: 30px;
        }

        .palm-trees-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 20px;
            max-width: 800px;
            margin: 0 auto 30px;
            padding: 20px;
        }

        .palm-tree {
            font-size: 48px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
            filter: grayscale(100%);
            opacity: 0.5;
        }

        .palm-tree:hover {
            transform: scale(1.2);
        }

        .palm-tree.counted {
            filter: grayscale(0%);
            opacity: 1;
            animation: treePop 0.5s ease-out;
        }

        @keyframes treePop {
            0% { transform: scale(0) rotate(0deg); }
            50% { transform: scale(1.3) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .counter-display {
            text-align: center;
            font-size: clamp(36px, 6vw, 72px);
            color: #2E7D32;
            font-weight: bold;
            margin-bottom: 20px;
        }

        /* ‚ïê‚ïê‚ïê ACTIVIT√â 2 : COULEURS ‚ïê‚ïê‚ïê */
        .colors-screen {
            background: white;
            padding: 30px 20px;
            border-radius: 30px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        .colors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            max-width: 900px;
            margin: 0 auto 30px;
        }

        .color-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            border: 4px solid transparent;
        }

        .color-card:hover {
            transform: translateY(-5px);
        }

        .color-card.revealed {
            border-color: #FFD700;
            animation: cardReveal 0.5s ease-out;
        }

        @keyframes cardReveal {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(90deg); }
            100% { transform: rotateY(0deg); }
        }

        .color-icon {
            font-size: 64px;
            margin-bottom: 15px;
        }

        .color-name {
            font-size: clamp(18px, 3vw, 24px);
            font-weight: bold;
            margin-bottom: 10px;
        }

        .color-item {
            font-size: clamp(14px, 2.5vw, 18px);
            color: #666;
        }

        /* ‚ïê‚ïê‚ïê ACTIVIT√â 3 : QUIZ ‚ïê‚ïê‚ïê */
        .quiz-screen {
            background: white;
            padding: 30px 20px;
            border-radius: 30px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        .quiz-question {
            text-align: center;
            font-size: clamp(18px, 3.5vw, 28px);
            color: #2E7D32;
            margin-bottom: 30px;
            padding: 20px;
            background: #F0F8FF;
            border-radius: 15px;
            border-left: 5px solid #2E7D32;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            max-width: 600px;
            margin: 0 auto 30px;
        }

        @media (min-width: 768px) {
            .quiz-options {
                grid-template-columns: 1fr 1fr;
            }
        }

        .quiz-option {
            padding: 20px;
            font-size: clamp(16px, 3vw, 22px);
            background: white;
            border: 3px solid #2E7D32;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .quiz-option:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        .quiz-option.correct {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
            animation: correctPulse 0.5s ease-out;
        }

        .quiz-option.incorrect {
            background: #F44336;
            color: white;
            border-color: #F44336;
            animation: shake 0.5s ease-out;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* ‚ïê‚ïê‚ïê √âCRAN DE R√âUSSITE ‚ïê‚ïê‚ïê */
        .success-screen {
            text-align: center;
            background: white;
            padding: 40px 20px;
            border-radius: 30px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            margin-top: 80px;
        }

        .success-icon {
            font-size: 100px;
            margin-bottom: 20px;
        }

        .success-title {
            font-size: clamp(28px, 5vw, 48px);
            color: #2E7D32;
            margin-bottom: 20px;
        }

        .success-text {
            font-size: clamp(16px, 3vw, 24px);
            color: #666;
            margin-bottom: 30px;
        }

        .success-stats {
            background: #F0F8FF;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            display: inline-block;
        }

        .stat-row {
            font-size: clamp(18px, 3vw, 24px);
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ‚ïê‚ïê‚ïê BOUTONS D'ACTION ‚ïê‚ïê‚ïê */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            font-size: clamp(16px, 3vw, 22px);
            font-weight: bold;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-width: 150px;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .btn-primary {
            background: #4CAF50;
            color: white;
        }

        .btn-secondary {
            background: #FF9800;
            color: white;
        }

        /* ‚ïê‚ïê‚ïê ASSISTANCE PARENTALE ‚ïê‚ïê‚ïê */
        .parent-guide {
            background: rgba(255, 255, 255, 0.95);
            border-left: 5px solid #2E7D32;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .parent-guide.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .parent-guide h3 {
            color: #2E7D32;
            margin-bottom: 10px;
            font-size: clamp(14px, 2.5vw, 18px);
        }

        .parent-guide p {
            color: #333;
            font-size: clamp(12px, 2vw, 16px);
            line-height: 1.4;
        }

        /* ‚ïê‚ïê‚ïê RESPONSIVE MOBILE ‚ïê‚ïê‚ïê */
        @media (max-width: 767px) {
            .stats-bar {
                font-size: 14px;
                padding: 8px 12px;
            }

            .stars {
                font-size: 20px;
            }

            .lang-btn {
                width: 50px;
                height: 50px;
                font-size: 24px;
            }

            .palm-tree {
                font-size: 36px;
            }

            .color-icon {
                font-size: 48px;
            }
        }

        /* ‚ïê‚ïê‚ïê ACCESSIBILIT√â ‚ïê‚ïê‚ïê */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            white-space: nowrap;
            border: 0;
        }

        *:focus {
            outline: 3px solid #FFD700;
            outline-offset: 2px;
        }

        /* ‚ïê‚ïê‚ïê CONFETTIS ‚ïê‚ïê‚ïê */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 3000;
            animation: confettiFall 3s linear forwards;
        }

        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- ‚ïê‚ïê‚ïê BARRE DE STATS ‚ïê‚ïê‚ïê -->
    <div class="stats-bar" role="region" aria-label="Statistiques">
        <div class="timer" role="timer" aria-live="polite">
            <span>‚è±Ô∏è</span>
            <span id="timerDisplay">00:00</span>
        </div>
        <div class="stars" aria-label="√âtoiles gagn√©es">
            <span class="star" id="star1">‚≠ê</span>
            <span class="star" id="star2">‚≠ê</span>
            <span class="star" id="star3">‚≠ê</span>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê S√âLECTEUR DE LANGUE ‚ïê‚ïê‚ïê -->
    <div class="language-selector" role="group" aria-label="S√©lecteur de langue">
        <button class="lang-btn active" data-lang="fr" aria-label="Fran√ßais">üá´üá∑</button>
        <button class="lang-btn" data-lang="ar" aria-label="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">üá∏üá¶</button>
    </div>

    <!-- ‚ïê‚ïê‚ïê CONTENEUR PRINCIPAL ‚ïê‚ïê‚ïê -->
    <div class="container">
        <!-- √âCRAN D'ACCUEIL -->
        <div class="screen active" id="welcomeScreen">
            <div class="welcome-screen">
                <div class="amina-character">üëßüèΩ</div>
                <h1 class="title" id="welcomeTitle">Bonjour ! Je m'appelle Amina üå¥</h1>
                <p class="welcome-text" id="welcomeText">Viens d√©couvrir mon oasis en Alg√©rie ! Nous allons compter les palmiers, apprendre les couleurs et d√©couvrir pourquoi les palmiers sont si importants !</p>
                <button class="start-btn" id="startBtn" onclick="startAdventure()">
                    <span id="startBtnText">Commencer l'aventure</span> üöÄ
                </button>
            </div>
        </div>

        <!-- ACTIVIT√â 1 : COMPTER LES PALMIERS -->
        <div class="screen" id="countingScreen">
            <div class="counting-screen">
                <h2 class="activity-title" id="countTitle">üå¥ Activit√© 1 : Compte les palmiers !</h2>
                <p class="instruction" id="countInstruction">Touche les palmiers un par un pour les compter de 1 √† 10 !</p>
                
                <div class="counter-display">
                    <span id="currentCount">0</span> / 10
                </div>

                <div class="palm-trees-grid" id="palmTreesGrid">
                    <!-- G√©n√©r√© en JavaScript -->
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="countNextBtn" onclick="nextActivity()" style="display: none;">
                        <span id="countNextBtnText">Activit√© suivante</span> ‚û°Ô∏è
                    </button>
                </div>

                <div class="parent-guide" id="countGuide">
                    <h3 id="countGuideTitle">üí¨ Conseil pour les parents</h3>
                    <p id="countGuideText"></p>
                </div>
            </div>
        </div>

        <!-- ACTIVIT√â 2 : COULEURS DE L'OASIS -->
        <div class="screen" id="colorsScreen">
            <div class="colors-screen">
                <h2 class="activity-title" id="colorTitle">üé® Activit√© 2 : Les couleurs de l'oasis !</h2>
                <p class="instruction" id="colorInstruction">Touche chaque carte pour d√©couvrir les couleurs de mon oasis !</p>

                <div class="colors-grid" id="colorsGrid">
                    <!-- G√©n√©r√© en JavaScript -->
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="colorNextBtn" onclick="nextActivity()" style="display: none;">
                        <span id="colorNextBtnText">Activit√© suivante</span> ‚û°Ô∏è
                    </button>
                </div>

                <div class="parent-guide" id="colorGuide">
                    <h3 id="colorGuideTitle">üí¨ Conseil pour les parents</h3>
                    <p id="colorGuideText"></p>
                </div>
            </div>
        </div>

        <!-- ACTIVIT√â 3 : QUIZ CULTUREL -->
        <div class="screen" id="quizScreen">
            <div class="quiz-screen">
                <h2 class="activity-title" id="quizTitle">ü§î Activit√© 3 : Quiz sur les palmiers !</h2>
                
                <div class="quiz-question" id="quizQuestion">
                    <!-- Question g√©n√©r√©e en JavaScript -->
                </div>

                <div class="quiz-options" id="quizOptions">
                    <!-- Options g√©n√©r√©es en JavaScript -->
                </div>

                <div class="parent-guide" id="quizGuide">
                    <h3 id="quizGuideTitle">üí¨ Conseil pour les parents</h3>
                    <p id="quizGuideText"></p>
                </div>
            </div>
        </div>

        <!-- √âCRAN DE R√âUSSITE -->
        <div class="screen" id="successScreen">
            <div class="success-screen">
                <div class="success-icon">üéâ</div>
                <h1 class="success-title" id="successTitle">Bravo Champion(ne) !</h1>
                <p class="success-text" id="successText">Tu as termin√© toutes les activit√©s avec Amina ! Tu connais maintenant l'importance des palmiers en Alg√©rie !</p>
                
                <div class="success-stats">
                    <div class="stat-row">
                        <span>‚è±Ô∏è</span>
                        <span id="finalTime">00:00</span>
                    </div>
                    <div class="stat-row">
                        <span>‚≠ê</span>
                        <span id="finalStars">3/3</span>
                    </div>
                    <div class="stat-row">
                        <span>üå¥</span>
                        <span id="culturalFact"></span>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="restartAdventure()">
                        <span id="restartBtnText">Recommencer</span> üîÑ
                    </button>
                </div>

                <div class="parent-guide show">
                    <h3 id="successGuideTitle">üí¨ Message pour les parents</h3>
                    <p id="successGuideText"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         JAVASCRIPT - LOGIQUE DU JEU
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script>
        // ‚ïê‚ïê‚ïê CONFIGURATION ‚ïê‚ïê‚ïê
        const CONFIG = {
            version: 'v1.0',
            totalActivities: 3,
            palmTreeCount: 10
        };

        // ‚ïê‚ïê‚ïê DONN√âES BILINGUES ‚ïê‚ïê‚ïê
        const TRANSLATIONS = {
            fr: {
                welcomeTitle: "Bonjour ! Je m'appelle Amina üå¥",
                welcomeText: "Viens d√©couvrir mon oasis en Alg√©rie ! Nous allons compter les palmiers, apprendre les couleurs et d√©couvrir pourquoi les palmiers sont si importants !",
                startBtnText: "Commencer l'aventure",
                
                // Activit√© 1
                countTitle: "üå¥ Activit√© 1 : Compte les palmiers !",
                countInstruction: "Touche les palmiers un par un pour les compter de 1 √† 10 !",
                countNextBtnText: "Activit√© suivante",
                countGuideTitle: "üí¨ Conseil pour les parents",
                countGuideTexts: {
                    start: "Encouragez votre enfant √† compter √† voix haute en touchant chaque palmier.",
                    halfway: "Excellent ! Continuez √† compter ensemble. R√©p√©tez les nombres apr√®s lui/elle.",
                    complete: "Bravo ! Vous pouvez maintenant demander : 'Combien y a-t-il de palmiers en tout ?'"
                },

                // Activit√© 2
                colorTitle: "üé® Activit√© 2 : Les couleurs de l'oasis !",
                colorInstruction: "Touche chaque carte pour d√©couvrir les couleurs de mon oasis !",
                colorNextBtnText: "Activit√© suivante",
                colorGuideTitle: "üí¨ Conseil pour les parents",
                colorGuideTexts: {
                    start: "Aidez votre enfant √† identifier les couleurs dans la pi√®ce o√π vous √™tes.",
                    exploring: "Demandez : 'De quelle couleur est le ciel ? Et les feuilles du palmier ?'",
                    complete: "Excellent ! Jouez au jeu 'Je vois quelque chose de vert/bleu/jaune...'"
                },
                colors: [
                    { name: "Vert", item: "Feuilles de palmier", color: "#4CAF50", icon: "üåø" },
                    { name: "Marron", item: "Tronc d'arbre", color: "#8D6E63", icon: "ü™µ" },
                    { name: "Bleu", item: "Ciel de l'oasis", color: "#2196F3", icon: "‚òÅÔ∏è" },
                    { name: "Jaune", item: "Soleil d'Alg√©rie", color: "#FFEB3B", icon: "‚òÄÔ∏è" },
                    { name: "Orange", item: "Dattes sucr√©es", color: "#FF9800", icon: "ü•≠" }
                ],

                // Activit√© 3
                quizTitle: "ü§î Activit√© 3 : Quiz sur les palmiers !",
                quizGuideTitle: "üí¨ Conseil pour les parents",
                quizGuideTexts: {
                    start: "Lisez les questions ensemble et laissez votre enfant r√©fl√©chir avant de r√©pondre.",
                    incorrect: "Ce n'est pas grave ! Expliquez la bonne r√©ponse avec des exemples.",
                    correct: "Bravo ! Renforcez l'apprentissage en discutant de ce qu'ils ont appris."
                },
                quizQuestions: [
                    {
                        question: "Que produisent les palmiers en Alg√©rie ?",
                        options: ["Des pommes üçé", "Des dattes ü•≠", "Des bananes üçå", "Des oranges üçä"],
                        correct: 1,
                        explanation: "Les palmiers produisent des dattes, un fruit tr√®s sucr√© !"
                    },
                    {
                        question: "Pourquoi les gens se rassemblent sous les palmiers ?",
                        options: ["Pour jouer üéÆ", "Pour l'ombre et le th√© ‚òï", "Pour dormir üò¥", "Pour cuisiner üç≥"],
                        correct: 1,
                        explanation: "On se rassemble sous les palmiers pour l'ombre fra√Æche et boire du th√© ensemble !"
                    },
                    {
                        question: "De quelle couleur sont les feuilles du palmier ?",
                        options: ["Rouges ‚ù§Ô∏è", "Bleues üíô", "Vertes üíö", "Jaunes üíõ"],
                        correct: 2,
                        explanation: "Les feuilles du palmier sont vertes et tr√®s grandes !"
                    }
                ],

                // Succ√®s
                successTitle: "Bravo Champion(ne) !",
                successText: "Tu as termin√© toutes les activit√©s avec Amina ! Tu connais maintenant l'importance des palmiers en Alg√©rie !",
                restartBtnText: "Recommencer",
                successGuideTitle: "üí¨ Message pour les parents",
                successGuideText: "F√©licitations ! Votre enfant a d√©couvert la culture alg√©rienne de mani√®re ludique. Prolongez l'apprentissage en parlant des traditions de votre famille ou en go√ªtant des dattes ensemble !",
                culturalFacts: [
                    "Les palmiers peuvent vivre 100 ans !",
                    "Un palmier produit jusqu'√† 100 kg de dattes par an !",
                    "L'Alg√©rie a des milliers d'oasis avec des palmiers !"
                ]
            },
            ar: {
                welcomeTitle: "ŸÖÿ±ÿ≠ÿ®ÿß ! ÿßÿ≥ŸÖŸä ÿ£ŸÖŸäŸÜÿ© üå¥",
                welcomeText: "ÿ™ÿπÿßŸÑ ŸÑÿßŸÉÿ™ÿ¥ÿßŸÅ Ÿàÿßÿ≠ÿ™Ÿä ŸÅŸä ÿßŸÑÿ¨ÿ≤ÿßÿ¶ÿ± ! ÿ≥ŸÜÿπÿØ ÿßŸÑŸÜÿÆŸäŸÑ ŸàŸÜÿ™ÿπŸÑŸÖ ÿßŸÑÿ£ŸÑŸàÿßŸÜ ŸàŸÜŸÉÿ™ÿ¥ŸÅ ŸÑŸÖÿßÿ∞ÿß ÿßŸÑŸÜÿÆŸäŸÑ ŸÖŸáŸÖ ÿ¨ÿØÿß !",
                startBtnText: "ÿßÿ®ÿØÿ£ ÿßŸÑŸÖÿ∫ÿßŸÖÿ±ÿ©",
                
                // Activit√© 1
                countTitle: "üå¥ ÿßŸÑŸÜÿ¥ÿßÿ∑ 1 : ÿπÿØ ÿßŸÑŸÜÿÆŸäŸÑ !",
                countInstruction: "ÿßŸÑŸÖÿ≥ ÿßŸÑŸÜÿÆŸäŸÑ Ÿàÿßÿ≠ÿØÿ© ÿ™ŸÑŸà ÿßŸÑÿ£ÿÆÿ±Ÿâ ŸÑÿ™ÿπÿØŸáÿß ŸÖŸÜ 1 ÿ•ŸÑŸâ 10 !",
                countNextBtnText: "ÿßŸÑŸÜÿ¥ÿßÿ∑ ÿßŸÑÿ™ÿßŸÑŸä",
                countGuideTitle: "üí¨ ŸÜÿµŸäÿ≠ÿ© ŸÑŸÑŸàÿßŸÑÿØŸäŸÜ",
                countGuideTexts: {
                    start: "ÿ¥ÿ¨ÿπ ÿ∑ŸÅŸÑŸÉ ÿπŸÑŸâ ÿßŸÑÿπÿØ ÿ®ÿµŸàÿ™ ÿπÿßŸÑŸç ÿπŸÜÿØ ŸÑŸÖÿ≥ ŸÉŸÑ ŸÜÿÆŸÑÿ©.",
                    halfway: "ŸÖŸÖÿ™ÿßÿ≤ ! ÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿπÿØ ŸÖÿπŸãÿß. ŸÉÿ±ÿ± ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ ÿ®ÿπÿØŸá/ÿ®ÿπÿØŸáÿß.",
                    complete: "ÿ£ÿ≠ÿ≥ŸÜÿ™ ! ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ¢ŸÜ ÿ£ŸÜ ÿ™ÿ≥ÿ£ŸÑ: 'ŸÉŸÖ ÿπÿØÿØ ÿßŸÑŸÜÿÆŸäŸÑ ÿ•ÿ¨ŸÖÿßŸÑÿßŸã ÿü'"
                },

                // Activit√© 2
                colorTitle: "üé® ÿßŸÑŸÜÿ¥ÿßÿ∑ 2 : ÿ£ŸÑŸàÿßŸÜ ÿßŸÑŸàÿßÿ≠ÿ© !",
                colorInstruction: "ÿßŸÑŸÖÿ≥ ŸÉŸÑ ÿ®ÿ∑ÿßŸÇÿ© ŸÑÿßŸÉÿ™ÿ¥ÿßŸÅ ÿ£ŸÑŸàÿßŸÜ Ÿàÿßÿ≠ÿ™Ÿä !",
                colorNextBtnText: "ÿßŸÑŸÜÿ¥ÿßÿ∑ ÿßŸÑÿ™ÿßŸÑŸä",
                colorGuideTitle: "üí¨ ŸÜÿµŸäÿ≠ÿ© ŸÑŸÑŸàÿßŸÑÿØŸäŸÜ",
                colorGuideTexts: {
                    start: "ÿ≥ÿßÿπÿØ ÿ∑ŸÅŸÑŸÉ ÿπŸÑŸâ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ£ŸÑŸàÿßŸÜ ŸÅŸä ÿßŸÑÿ∫ÿ±ŸÅÿ© ÿßŸÑÿ™Ÿä ÿ£ŸÜÿ™ŸÖ ŸÅŸäŸáÿß.",
                    exploring: "ÿßÿ≥ÿ£ŸÑ: 'ŸÖÿß ŸÑŸàŸÜ ÿßŸÑÿ≥ŸÖÿßÿ° ÿü Ÿàÿ£Ÿàÿ±ÿßŸÇ ÿßŸÑŸÜÿÆŸäŸÑ ÿü'",
                    complete: "ŸÖŸÖÿ™ÿßÿ≤ ! ÿßŸÑÿπÿ® ŸÑÿπÿ®ÿ© 'ÿ£ÿ±Ÿâ ÿ¥Ÿäÿ¶Ÿãÿß ÿ£ÿÆÿ∂ÿ±/ÿ£ÿ≤ÿ±ŸÇ/ÿ£ÿµŸÅÿ±...'"
                },
                colors: [
                    { name: "ÿ£ÿÆÿ∂ÿ±", item: "ÿ£Ÿàÿ±ÿßŸÇ ÿßŸÑŸÜÿÆŸäŸÑ", color: "#4CAF50", icon: "üåø" },
                    { name: "ÿ®ŸÜŸä", item: "ÿ¨ÿ∞ÿπ ÿßŸÑÿ¥ÿ¨ÿ±ÿ©", color: "#8D6E63", icon: "ü™µ" },
                    { name: "ÿ£ÿ≤ÿ±ŸÇ", item: "ÿ≥ŸÖÿßÿ° ÿßŸÑŸàÿßÿ≠ÿ©", color: "#2196F3", icon: "‚òÅÔ∏è" },
                    { name: "ÿ£ÿµŸÅÿ±", item: "ÿ¥ŸÖÿ≥ ÿßŸÑÿ¨ÿ≤ÿßÿ¶ÿ±", color: "#FFEB3B", icon: "‚òÄÔ∏è" },
                    { name: "ÿ®ÿ±ÿ™ŸÇÿßŸÑŸä", item: "ÿ™ŸÖÿ± ÿ≠ŸÑŸà", color: "#FF9800", icon: "ü•≠" }
                ],

                // Activit√© 3
                quizTitle: "ü§î ÿßŸÑŸÜÿ¥ÿßÿ∑ 3 : ŸÖÿ≥ÿßÿ®ŸÇÿ© ÿ≠ŸàŸÑ ÿßŸÑŸÜÿÆŸäŸÑ !",
                quizGuideTitle: "üí¨ ŸÜÿµŸäÿ≠ÿ© ŸÑŸÑŸàÿßŸÑÿØŸäŸÜ",
                quizGuideTexts: {
                    start: "ÿßŸÇÿ±ÿ£ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸÖÿπŸãÿß ŸàÿØÿπ ÿ∑ŸÅŸÑŸÉ ŸäŸÅŸÉÿ± ŸÇÿ®ŸÑ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©.",
                    incorrect: "ŸÑÿß ÿ®ÿ£ÿ≥ ! ÿßÿ¥ÿ±ÿ≠ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ© ÿ®ÿ£ŸÖÿ´ŸÑÿ©.",
                    correct: "ÿ£ÿ≠ÿ≥ŸÜÿ™ ! ÿπÿ≤ÿ≤ ÿßŸÑÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿÆŸÑÿßŸÑ ŸÖŸÜÿßŸÇÿ¥ÿ© ŸÖÿß ÿ™ÿπŸÑŸÖŸàŸá."
                },
                quizQuestions: [
                    {
                        question: "ŸÖÿßÿ∞ÿß ŸäŸÜÿ™ÿ¨ ÿßŸÑŸÜÿÆŸäŸÑ ŸÅŸä ÿßŸÑÿ¨ÿ≤ÿßÿ¶ÿ± ÿü",
                        options: ["ÿ™ŸÅÿßÿ≠ üçé", "ÿ™ŸÖÿ± ü•≠", "ŸÖŸàÿ≤ üçå", "ÿ®ÿ±ÿ™ŸÇÿßŸÑ üçä"],
                        correct: 1,
                        explanation: "ŸäŸÜÿ™ÿ¨ ÿßŸÑŸÜÿÆŸäŸÑ ÿßŸÑÿ™ŸÖÿ±ÿå ŸàŸáŸà ŸÅÿßŸÉŸáÿ© ÿ≠ŸÑŸàÿ© ÿ¨ÿØÿß !"
                    },
                    {
                        question: "ŸÑŸÖÿßÿ∞ÿß Ÿäÿ™ÿ¨ŸÖÿπ ÿßŸÑŸÜÿßÿ≥ ÿ™ÿ≠ÿ™ ÿßŸÑŸÜÿÆŸäŸÑ ÿü",
                        options: ["ŸÑŸÑÿπÿ® üéÆ", "ŸÑŸÑÿ∏ŸÑ ŸàÿßŸÑÿ¥ÿßŸä ‚òï", "ŸÑŸÑŸÜŸàŸÖ üò¥", "ŸÑŸÑÿ∑ÿ®ÿÆ üç≥"],
                        correct: 1,
                        explanation: "ŸÜÿ™ÿ¨ŸÖÿπ ÿ™ÿ≠ÿ™ ÿßŸÑŸÜÿÆŸäŸÑ ŸÑŸÑÿ∏ŸÑ ÿßŸÑÿ®ÿßÿ±ÿØ Ÿàÿ¥ÿ±ÿ® ÿßŸÑÿ¥ÿßŸä ŸÖÿπÿß !"
                    },
                    {
                        question: "ŸÖÿß ŸÑŸàŸÜ ÿ£Ÿàÿ±ÿßŸÇ ÿßŸÑŸÜÿÆŸäŸÑ ÿü",
                        options: ["ÿ£ÿ≠ŸÖÿ± ‚ù§Ô∏è", "ÿ£ÿ≤ÿ±ŸÇ üíô", "ÿ£ÿÆÿ∂ÿ± üíö", "ÿ£ÿµŸÅÿ± üíõ"],
                        correct: 2,
                        explanation: "ÿ£Ÿàÿ±ÿßŸÇ ÿßŸÑŸÜÿÆŸäŸÑ ÿÆÿ∂ÿ±ÿßÿ° ŸàŸÉÿ®Ÿäÿ±ÿ© ÿ¨ÿØÿß !"
                    }
                ],

                // Succ√®s
                successTitle: "ÿ£ÿ≠ÿ≥ŸÜÿ™ ÿ£ŸäŸáÿß ÿßŸÑÿ®ÿ∑ŸÑ !",
                successText: "ŸÑŸÇÿØ ÿ£ŸÜŸáŸäÿ™ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ© ŸÖÿπ ÿ£ŸÖŸäŸÜÿ© ! ÿ£ŸÜÿ™ ÿ™ÿπÿ±ŸÅ ÿßŸÑÿ¢ŸÜ ÿ£ŸáŸÖŸäÿ© ÿßŸÑŸÜÿÆŸäŸÑ ŸÅŸä ÿßŸÑÿ¨ÿ≤ÿßÿ¶ÿ± !",
                restartBtnText: "ÿßÿ®ÿØÿ£ ŸÖŸÜ ÿ¨ÿØŸäÿØ",
                successGuideTitle: "üí¨ ÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÑŸàÿßŸÑÿØŸäŸÜ",
                successGuideText: "ÿ™ŸáÿßŸÜŸäŸÜÿß ! ÿßŸÉÿ™ÿ¥ŸÅ ÿ∑ŸÅŸÑŸÉ ÿßŸÑÿ´ŸÇÿßŸÅÿ© ÿßŸÑÿ¨ÿ≤ÿßÿ¶ÿ±Ÿäÿ© ÿ®ÿ∑ÿ±ŸäŸÇÿ© ŸÖŸÖÿ™ÿπÿ©. ÿ™ÿßÿ®ÿπ ÿßŸÑÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿÆŸÑÿßŸÑ ÿßŸÑÿ≠ÿØŸäÿ´ ÿπŸÜ ÿ™ŸÇÿßŸÑŸäÿØ ÿπÿßÿ¶ŸÑÿ™ŸÉ ÿ£Ÿà ÿ™ÿ∞ŸàŸÇ ÿßŸÑÿ™ŸÖÿ± ŸÖÿπŸãÿß !",
                culturalFacts: [
                    "ŸäŸÖŸÉŸÜ ÿ£ŸÜ ÿ™ÿπŸäÿ¥ ÿßŸÑŸÜÿÆŸÑÿ© 100 ÿ≥ŸÜÿ© !",
                    "ÿ™ŸÜÿ™ÿ¨ ÿßŸÑŸÜÿÆŸÑÿ© ŸÖÿß ŸäÿµŸÑ ÿ•ŸÑŸâ 100 ŸÉÿ¨ŸÖ ŸÖŸÜ ÿßŸÑÿ™ŸÖÿ± ÿ≥ŸÜŸàŸäŸãÿß !",
                    "ÿßŸÑÿ¨ÿ≤ÿßÿ¶ÿ± ÿ®Ÿáÿß ÿ¢ŸÑÿßŸÅ ÿßŸÑŸàÿßÿ≠ÿßÿ™ ŸÖÿπ ÿßŸÑŸÜÿÆŸäŸÑ !"
                ]
            }
        };

        // ‚ïê‚ïê‚ïê √âTAT DU JEU ‚ïê‚ïê‚ïê
        let currentLang = 'fr';
        let currentScreen = 'welcomeScreen';
        let starsEarned = 0;
        let timerInterval;
        let timerSeconds = 0;
        let palmTreesClicked = 0;
        let colorsRevealed = 0;
        let currentQuizQuestion = 0;
        let quizCorrectAnswers = 0;

        // ‚ïê‚ïê‚ïê INITIALISATION ‚ïê‚ïê‚ïê
        document.addEventListener('DOMContentLoaded', () => {
            setupEventListeners();
            startTimer();
        });

        // ‚ïê‚ïê‚ïê GESTION DES LANGUES ‚ïê‚ïê‚ïê
        function updateTexts() {
            const t = TRANSLATIONS[currentLang];
            
            // √âcran d'accueil
            document.getElementById('welcomeTitle').textContent = t.welcomeTitle;
            document.getElementById('welcomeText').textContent = t.welcomeText;
            document.getElementById('startBtnText').textContent = t.startBtnText;

            // Activit√© 1
            document.getElementById('countTitle').textContent = t.countTitle;
            document.getElementById('countInstruction').textContent = t.countInstruction;
            document.getElementById('countNextBtnText').textContent = t.countNextBtnText;
            document.getElementById('countGuideTitle').textContent = t.countGuideTitle;

            // Activit√© 2
            document.getElementById('colorTitle').textContent = t.colorTitle;
            document.getElementById('colorInstruction').textContent = t.colorInstruction;
            document.getElementById('colorNextBtnText').textContent = t.colorNextBtnText;
            document.getElementById('colorGuideTitle').textContent = t.colorGuideTitle;

            // Activit√© 3
            document.getElementById('quizTitle').textContent = t.quizTitle;
            document.getElementById('quizGuideTitle').textContent = t.quizGuideTitle;

            // Succ√®s
            document.getElementById('successTitle').textContent = t.successTitle;
            document.getElementById('successText').textContent = t.successText;
            document.getElementById('restartBtnText').textContent = t.restartBtnText;
            document.getElementById('successGuideTitle').textContent = t.successGuideTitle;
            document.getElementById('successGuideText').textContent = t.successGuideText;

            // Direction du texte
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
        }

        // ‚ïê‚ïê‚ïê NAVIGATION ‚ïê‚ïê‚ïê
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
        }

        function startAdventure() {
            showScreen('countingScreen');
            initCountingActivity();
            showParentGuide('countGuide', 'start');
        }

        function nextActivity() {
            if (currentScreen === 'countingScreen') {
                showScreen('colorsScreen');
                initColorsActivity();
                showParentGuide('colorGuide', 'start');
            } else if (currentScreen === 'colorsScreen') {
                showScreen('quizScreen');
                initQuizActivity();
                showParentGuide('quizGuide', 'start');
            }
        }

        function restartAdventure() {
            location.reload();
        }

        // ‚ïê‚ïê‚ïê ACTIVIT√â 1 : COMPTER ‚ïê‚ïê‚ïê
        function initCountingActivity() {
            const grid = document.getElementById('palmTreesGrid');
            grid.innerHTML = '';
            palmTreesClicked = 0;
            
            for (let i = 1; i <= CONFIG.palmTreeCount; i++) {
                const tree = document.createElement('div');
                tree.className = 'palm-tree';
                tree.textContent = 'üå¥';
                tree.dataset.number = i;
                tree.setAttribute('role', 'button');
                tree.setAttribute('aria-label', `Palmier ${i}`);
                tree.setAttribute('tabindex', '0');
                tree.onclick = () => countPalmTree(tree, i);
                grid.appendChild(tree);
            }
        }

        function countPalmTree(tree, number) {
            if (tree.classList.contains('counted')) return;
            
            palmTreesClicked++;
            tree.classList.add('counted');
            document.getElementById('currentCount').textContent = palmTreesClicked;
            
            playSound('count');
            
            if (palmTreesClicked === 5) {
                showParentGuide('countGuide', 'halfway');
            }
            
            if (palmTreesClicked === CONFIG.palmTreeCount) {
                earnStar(1);
                document.getElementById('countNextBtn').style.display = 'block';
                showParentGuide('countGuide', 'complete');
                createConfetti();
            }
        }

        // ‚ïê‚ïê‚ïê ACTIVIT√â 2 : COULEURS ‚ïê‚ïê‚ïê
        function initColorsActivity() {
            const grid = document.getElementById('colorsGrid');
            const colors = TRANSLATIONS[currentLang].colors;
            colorsRevealed = 0;
            
            grid.innerHTML = colors.map((color, index) => `
                <div class="color-card" 
                     onclick="revealColor(${index})"
                     data-index="${index}"
                     role="button"
                     aria-label="${color.name}"
                     tabindex="0">
                    <div class="color-icon">${color.icon}</div>
                    <div class="color-name" style="color: ${color.color}">${color.name}</div>
                    <div class="color-item">${color.item}</div>
                </div>
            `).join('');
        }

        function revealColor(index) {
            const card = document.querySelector(`[data-index="${index}"]`);
            if (card.classList.contains('revealed')) return;
            
            card.classList.add('revealed');
            colorsRevealed++;
            
            playSound('reveal');
            
            if (colorsRevealed === 3) {
                showParentGuide('colorGuide', 'exploring');
            }
            
            if (colorsRevealed === TRANSLATIONS[currentLang].colors.length) {
                earnStar(2);
                document.getElementById('colorNextBtn').style.display = 'block';
                showParentGuide('colorGuide', 'complete');
                createConfetti();
            }
        }

        // ‚ïê‚ïê‚ïê ACTIVIT√â 3 : QUIZ ‚ïê‚ïê‚ïê
        function initQuizActivity() {
            currentQuizQuestion = 0;
            quizCorrectAnswers = 0;
            showQuizQuestion();
        }

        function showQuizQuestion() {
            const questions = TRANSLATIONS[currentLang].quizQuestions;
            
            if (currentQuizQuestion >= questions.length) {
                if (quizCorrectAnswers >= 2) {
                    earnStar(3);
                    showSuccessScreen();
                } else {
                    // Recommencer le quiz
                    currentQuizQuestion = 0;
                    quizCorrectAnswers = 0;
                    showQuizQuestion();
                }
                return;
            }
            
            const q = questions[currentQuizQuestion];
            document.getElementById('quizQuestion').textContent = q.question;
            
            const optionsHtml = q.options.map((option, index) => `
                <button class="quiz-option" 
                        onclick="checkQuizAnswer(${index})"
                        aria-label="${option}">
                    ${option}
                </button>
            `).join('');
            
            document.getElementById('quizOptions').innerHTML = optionsHtml;
        }

        function checkQuizAnswer(selectedIndex) {
            const questions = TRANSLATIONS[currentLang].quizQuestions;
            const q = questions[currentQuizQuestion];
            const options = document.querySelectorAll('.quiz-option');
            
            if (selectedIndex === q.correct) {
                options[selectedIndex].classList.add('correct');
                quizCorrectAnswers++;
                playSound('success');
                showParentGuide('quizGuide', 'correct');
            } else {
                options[selectedIndex].classList.add('incorrect');
                options[q.correct].classList.add('correct');
                playSound('error');
                showParentGuide('quizGuide', 'incorrect');
            }
            
            // D√©sactiver tous les boutons
            options.forEach(opt => opt.disabled = true);
            
            // Passer √† la question suivante
            setTimeout(() => {
                currentQuizQuestion++;
                showQuizQuestion();
            }, 2000);
        }

        // ‚ïê‚ïê‚ïê √âCRAN DE R√âUSSITE ‚ïê‚ïê‚ïê
        function showSuccessScreen() {
            showScreen('successScreen');
            stopTimer();
            
            const t = TRANSLATIONS[currentLang];
            document.getElementById('finalTime').textContent = formatTime(timerSeconds);
            document.getElementById('finalStars').textContent = `${starsEarned}/3`;
            
            const randomFact = t.culturalFacts[Math.floor(Math.random() * t.culturalFacts.length)];
            document.getElementById('culturalFact').textContent = randomFact;
            
            createConfetti();
        }

        // ‚ïê‚ïê‚ïê SYST√àME D'√âTOILES ‚ïê‚ïê‚ïê
        function earnStar(starNumber) {
            const star = document.getElementById(`star${starNumber}`);
            if (!star.classList.contains('earned')) {
                star.classList.add('earned');
                starsEarned++;
                playSound('star');
            }
        }

        // ‚ïê‚ïê‚ïê ASSISTANCE PARENTALE ‚ïê‚ïê‚ïê
        function showParentGuide(guideId, type) {
            const guide = document.getElementById(guideId);
            const textElement = document.getElementById(guideId.replace('Guide', 'GuideText'));
            
            const t = TRANSLATIONS[currentLang];
            let texts;
            
            if (guideId === 'countGuide') {
                texts = t.countGuideTexts;
            } else if (guideId === 'colorGuide') {
                texts = t.colorGuideTexts;
            } else if (guideId === 'quizGuide') {
                texts = t.quizGuideTexts;
            }
            
            if (texts && texts[type]) {
                textElement.textContent = texts[type];
                guide.classList.add('show');
                
                setTimeout(() => {
                    guide.classList.remove('show');
                }, 8000);
            }
        }

        // ‚ïê‚ïê‚ïê CHRONOM√àTRE ‚ïê‚ïê‚ïê
        function startTimer() {
            timerInterval = setInterval(() => {
                if (currentScreen !== 'welcomeScreen' && currentScreen !== 'successScreen') {
                    timerSeconds++;
                    document.getElementById('timerDisplay').textContent = formatTime(timerSeconds);
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // ‚ïê‚ïê‚ïê CONFETTIS ‚ïê‚ïê‚ïê
        function createConfetti() {
            const colors = ['#FFD700', '#4CAF50', '#2196F3', '#FF9800', '#E91E63'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * window.innerWidth + 'px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        // ‚ïê‚ïê‚ïê SONS (SIMUL√âS) ‚ïê‚ïê‚ïê
        function playSound(type) {
            if (navigator.vibrate) {
                const patterns = {
                    count: [30],
                    reveal: [50],
                    success: [100, 50, 100],
                    error: [200],
                    star: [50, 50, 50, 50, 50]
                };
                navigator.vibrate(patterns[type] || [50]);
            }
        }

        // ‚ïê‚ïê‚ïê EVENT LISTENERS ‚ïê‚ïê‚ïê
        function setupEventListeners() {
            // Boutons de langue
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentLang = btn.dataset.lang;
                    updateTexts();
                    
                    // R√©initialiser l'activit√© en cours
                    if (currentScreen === 'countingScreen') {
                        initCountingActivity();
                    } else if (currentScreen === 'colorsScreen') {
                        initColorsActivity();
                    } else if (currentScreen === 'quizScreen') {
                        initQuizActivity();
                    }
                });
            });

            // Support clavier
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && document.activeElement.onclick) {
                    document.activeElement.click();
                }
            });
        }

        // ‚ïê‚ïê‚ïê CONSOLE VERSION ‚ïê‚ïê‚ïê
        console.log(`%cüå¥ Sous le Palmier v${CONFIG.version}`, 'font-size: 20px; color: #2E7D32; font-weight: bold;');
        console.log('%cCr√©√© par mohamed - 3 novembre 2025', 'color: #D2691E;');
        console.log('%cPersonnage : Amina | Culture : Alg√©rie | Activit√©s : 3', 'color: #666;');
    </script>

    <div class="page-navigation">
      <a class="nav-button" href="jeux11.html">Page pr√©c√©dente</a>
      <span class="nav-button disabled" aria-disabled="true">Page suivante</span>
    </div>
    <style>
      .page-navigation {
        display: flex;
        justify-content: space-between;
        gap: 16px;
        max-width: 420px;
        margin: 60px auto 20px;
        padding: 0 20px;
      }
      .page-navigation .nav-button {
        flex: 1;
        text-align: center;
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        color: #ffffff;
        padding: 12px 18px;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 600;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
        transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
      }
      .page-navigation .nav-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 22px rgba(0, 0, 0, 0.2);
      }
      .page-navigation .nav-button.disabled {
        pointer-events: none;
        opacity: 0.5;
        background: #95a5a6;
        box-shadow: none;
      }
    </style>

</body>
</html>
