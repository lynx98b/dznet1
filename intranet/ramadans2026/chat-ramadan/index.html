<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Ramadan - CommunautÃ©</title>
    
    <!-- CSS externe -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    
    <!-- DISCLAIMER MODAL -->
    <div class="modal-overlay" id="disclaimerModal">
        <div class="modal">
            <div class="modal-header">
                <h2>ğŸ“œ RÃ¨gles du Chat Ramadan</h2>
                <p>Ã€ lire attentivement avant de continuer</p>
            </div>
            
            <div class="modal-body">
                <h3>âŒ Contenus Strictement Interdits</h3>
                <ul class="rules-list">
                    <li>Politique, propagande, dÃ©bats partisans</li>
                    <li>ExtrÃ©misme, terrorisme, incitation Ã  la haine</li>
                    <li>Armes, violence, menaces</li>
                    <li>Drogue, substances illicites</li>
                    <li>Discrimination (racisme, sexisme, homophobie, etc.)</li>
                    <li>Contenu sexuel explicite, pornographie</li>
                    <li>HarcÃ¨lement, insultes, bizutage</li>
                    <li>Spam, publicitÃ© non autorisÃ©e</li>
                    <li>DÃ©sinformation, fake news</li>
                    <li>Usurpation d'identitÃ©</li>
                    <li>Partage de donnÃ©es personnelles</li>
                </ul>
                
                <div class="highlight-box">
                    <strong>â±ï¸ Limite de messages:</strong> Maximum 6 messages par minute.
                    <br><strong>ğŸš« Filtrage automatique:</strong> Insultes bloquÃ©es.
                </div>
                
                <h3>âœ… Comportements Attendus</h3>
                <p><strong>Respect mutuel</strong> - Soyez bienveillants</p>
                <p><strong>Entraide</strong> - Soutenez la communautÃ©</p>
                <p><strong>Signalement</strong> - Signalez les abus</p>
            </div>
            
            <div class="modal-footer">
                <label class="checkbox-container">
                    <input type="checkbox" id="acceptCheckbox">
                    <span>J'ai lu et j'accepte les rÃ¨gles</span>
                </label>
                <button class="accept-btn" id="acceptBtn" disabled>Accepter et Continuer</button>
            </div>
        </div>
    </div>
    
    <!-- PROFILE MODAL -->
    <div class="modal-overlay hidden" id="profileModal">
        <div class="modal">
            <div class="modal-header">
                <h2>âœ¨ CrÃ©er votre profil</h2>
                <p>Pour commencer Ã  discuter</p>
            </div>
            
            <div class="modal-body">
                <form id="profileForm">
                    <div class="form-group">
                        <label class="form-label">ğŸ­ Pseudo (3-20 caractÃ¨res)</label>
                        <input type="text" id="pseudoInput" class="form-input" 
                               placeholder="Ex: joliecoeur" minlength="3" maxlength="20" required>
                        <div class="form-error" id="pseudoError">3-20 caractÃ¨res requis</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">âš§ï¸ Sexe</label>
                        <div class="gender-selector">
                            <label class="gender-option">
                                <input type="radio" name="gender" value="F" required>
                                <div class="gender-icon">ğŸ‘©</div>
                                <div class="gender-label">Femme</div>
                            </label>
                            <label class="gender-option">
                                <input type="radio" name="gender" value="M" required>
                                <div class="gender-icon">ğŸ‘¨</div>
                                <div class="gender-label">Homme</div>
                            </label>
                        </div>
                        <div class="form-error" id="genderError">SÃ©lectionnez votre sexe</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ğŸ‚ Ã‚ge (13-99 ans)</label>
                        <input type="number" id="ageInput" class="form-input" 
                               placeholder="Ex: 25" min="13" max="99" required>
                        <div class="form-error" id="ageError">Ã‚ge entre 13-99 ans</div>
                    </div>
                    
                    <div class="profile-preview">
                        <div class="profile-preview-label">ğŸ“‹ AperÃ§u</div>
                        <div class="profile-preview-display" id="profilePreview">Remplissez le formulaire</div>
                    </div>
                </form>
            </div>
            
            <div class="modal-footer">
                <button class="accept-btn" id="saveProfileBtn" type="button">Enregistrer</button>
            </div>
        </div>
    </div>
    
    <!-- RATE LIMIT WARNING -->
    <div class="rate-warning" id="rateWarning">
        <span>â±ï¸</span>
        <span>Trop de messages !</span>
        <span class="rate-countdown" id="rateCountdown">15s</span>
    </div>
    
    <!-- CONTAINER PRINCIPAL -->
    <div class="chat-container">
        
        <!-- SIDEBAR USERS -->
        <div class="users-sidebar">
            <div class="sidebar-header">
                <h2>ğŸŒ™ En ligne</h2>
                <div class="online-count" id="onlineCount">0 connectÃ©s</div>
            </div>
            <div class="users-list" id="usersList"></div>
        </div>
        
        <!-- ZONE CHAT -->
        <div class="chat-main">
            
            <!-- Ã‰CRAN CONNEXION -->
            <div class="chat-login" id="loginScreen">
                <div class="login-icon">ğŸŒ™</div>
                <h1>Chat Ramadan</h1>
                <p>CommunautÃ© bienveillante</p>
                <button class="google-signin-btn" id="googleSignInBtn">
                    <span style="font-size: 1.5rem;">ğŸ”</span>
                    <span>Se connecter avec Google</span>
                </button>
            </div>
            
            <!-- CHAT ACTIF -->
            <div class="chat-active" id="chatActive">
                
                <!-- HEADER -->
                <div class="chat-header">
                    <div class="header-left">
                        <img src="" alt="" class="header-avatar" id="headerAvatar">
                        <div class="header-info">
                            <h3 id="headerName">Utilisateur</h3>
                            <p>Chat Ramadan</p>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button class="header-btn" id="soundBtn" title="Sons">ğŸ””</button>
                        <button class="header-btn" id="darkModeBtn" title="Mode sombre">ğŸŒ™</button>
                        <button class="logout-btn" id="logoutBtn">DÃ©co</button>
                    </div>
                </div>
                
                <!-- MESSAGES -->
                <div class="messages-container">
                    <div class="chat-messages" id="chatMessages"></div>
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="typing-dots">
                            <span></span><span></span><span></span>
                        </div>
                        <span id="typingText"></span>
                    </div>
                </div>
                
                <!-- INPUT ZONE -->
                <div class="chat-input-area">
                    <div class="rate-counter" id="rateCounter">6/6 messages</div>
                    
                    <div class="selected-user-banner" id="selectedUserBanner">
                        <span>ğŸ Pour: <strong id="selectedUserName"></strong></span>
                        <button class="clear-selection" id="clearSelection">âœ•</button>
                    </div>
                    
                    <div class="actions-bar">
                        <button class="action-btn" id="emojiBtn" title="Emojis">ğŸ˜Š</button>
                        <button class="action-btn" id="giftBtn" title="Cadeaux">ğŸ</button>
                    </div>
                    
                    <div class="picker" id="emojiPicker">
                        <h4>ğŸ˜Š Emojis</h4>
                        <div class="emoji-grid" id="emojiGrid"></div>
                    </div>
                    
                    <div class="picker" id="giftPicker">
                        <h4>ğŸ Cadeaux</h4>
                        <div class="gift-grid" id="giftGrid"></div>
                    </div>
                    
                    <form class="input-form" id="messageForm">
                        <input type="text" class="message-input" id="messageInput" 
                               placeholder="Votre message..." maxlength="200" autocomplete="off" required>
                        <button type="submit" class="send-btn" id="sendBtn">
                            <span>Envoyer</span> ğŸ“¤
                        </button>
                    </form>
                </div>
                
            </div>
        </div>
    </div>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- Scripts modulaires -->
    <script src="js/config.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/chat.js"></script>
    
</body>
</html>
