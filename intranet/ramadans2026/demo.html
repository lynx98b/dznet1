<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Test Chat Firebase</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; margin: 10px; }
        #status { margin: 20px 0; padding: 15px; background: #f0f0f0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Test Firebase Auth</h1>
    <div id="status">Status: Chargement...</div>
    <button id="loginBtn">ğŸ” Connexion Google</button>
    <button id="logoutBtn" style="display:none;">ğŸšª DÃ©connexion</button>
    <div id="userInfo" style="display:none; margin-top: 20px;"></div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <script>
        // âœ… TES VRAIES CLÃ‰S FIREBASE
        const firebaseConfig = {
            apiKey: "AIzaSyBoF6xTWr4dzgbWFwXavVC2mMshHCTK6fM",
            authDomain: "ramadan-chat-auth.firebaseapp.com",
            projectId: "ramadan-chat-auth",
            storageBucket: "ramadan-chat-auth.firebasestorage.app",
            messagingSenderId: "785976346844",
            appId: "1:785976346844:web:62b890dbc32a32596f8c19"
        };
        
        // Initialisation
        console.log('ğŸ”§ Initialisation Firebase...');
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const googleProvider = new firebase.auth.GoogleAuthProvider();
        
        // Ã‰lÃ©ments DOM
        const statusDiv = document.getElementById('status');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const userInfo = document.getElementById('userInfo');
        
        // Test initialisation
        statusDiv.textContent = 'âœ… Firebase initialisÃ© avec succÃ¨s!';
        statusDiv.style.background = '#d4edda';
        
        // Connexion
        loginBtn.addEventListener('click', async () => {
            try {
                statusDiv.textContent = 'â³ Connexion en cours...';
                statusDiv.style.background = '#fff3cd';
                
                const result = await auth.signInWithPopup(googleProvider);
                console.log('âœ… Connexion rÃ©ussie:', result.user.displayName);
                
                statusDiv.textContent = 'âœ… Connexion rÃ©ussie!';
                statusDiv.style.background = '#d4edda';
            } catch (error) {
                console.error('âŒ Erreur:', error);
                statusDiv.textContent = 'âŒ Erreur: ' + error.message;
                statusDiv.style.background = '#f8d7da';
            }
        });
        
        // DÃ©connexion
        logoutBtn.addEventListener('click', async () => {
            await auth.signOut();
        });
        
        // Observer Ã©tat
        auth.onAuthStateChanged(user => {
            if (user) {
                loginBtn.style.display = 'none';
                logoutBtn.style.display = 'inline-block';
                userInfo.style.display = 'block';
                userInfo.innerHTML = `
                    <img src="${user.photoURL}" width="50" style="border-radius: 50%;">
                    <p><strong>Nom:</strong> ${user.displayName}</p>
                    <p><strong>Email:</strong> ${user.email}</p>
                    <p><strong>UID:</strong> ${user.uid}</p>
                `;
                statusDiv.textContent = 'âœ… ConnectÃ© en tant que ' + user.displayName;
                statusDiv.style.background = '#d4edda';
            } else {
                loginBtn.style.display = 'inline-block';
                logoutBtn.style.display = 'none';
                userInfo.style.display = 'none';
                statusDiv.textContent = 'â„¹ï¸ PrÃªt - Cliquez pour vous connecter';
                statusDiv.style.background = '#d1ecf1';
            }
        });
    </script>
</body>
</html>
